<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/function_tasks/task_kbd.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_dd44d79ba9a472f66a6851d54403189f.html">function_tasks</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">task_kbd.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>FUNCTIONAL TASK - trigger keyboard actions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;freertos/FreeRTOS.h&gt;</code><br />
<code>#include &lt;freertos/event_groups.h&gt;</code><br />
<code>#include &lt;freertos/queue.h&gt;</code><br />
<code>#include &lt;esp_log.h&gt;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
</div>
<p><a href="task__kbd_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtaskKeyboardConfig.html">taskKeyboardConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Config for task_keyboard.  <a href="structtaskKeyboardConfig.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a45ba202b05caf39795aeca91b0ae547e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__kbd_8h.html#a45ba202b05caf39795aeca91b0ae547e">TIMEOUT</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a45ba202b05caf39795aeca91b0ae547e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout for queue sending of keyboard commands [ticks].  <a href="#a45ba202b05caf39795aeca91b0ae547e">More...</a><br /></td></tr>
<tr class="separator:a45ba202b05caf39795aeca91b0ae547e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a795efc5a0066d74b5855a17665203e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__kbd_8h.html#a0a795efc5a0066d74b5855a17665203e">TASK_KEYBOARD_STACKSIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="memdesc:a0a795efc5a0066d74b5855a17665203e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stacksize for this functional task.  <a href="#a0a795efc5a0066d74b5855a17665203e">More...</a><br /></td></tr>
<tr class="separator:a0a795efc5a0066d74b5855a17665203e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d6b3680a52c16cd778420b8953eab7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__kbd_8h.html#af1d6b3680a52c16cd778420b8953eab7">TASK_KEYBOARD_PARAMETERLENGTH</a>&#160;&#160;&#160;45</td></tr>
<tr class="memdesc:af1d6b3680a52c16cd778420b8953eab7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count of keycodes for parameter array for keycodes.  <a href="#af1d6b3680a52c16cd778420b8953eab7">More...</a><br /></td></tr>
<tr class="separator:af1d6b3680a52c16cd778420b8953eab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a1ea00a7b13dc2b804f53e6f79cb89f2c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtaskKeyboardConfig.html">taskKeyboardConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__kbd_8h.html#a1ea00a7b13dc2b804f53e6f79cb89f2c">taskKeyboardConfig_t</a></td></tr>
<tr class="memdesc:a1ea00a7b13dc2b804f53e6f79cb89f2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Config for task_keyboard.  <a href="#a1ea00a7b13dc2b804f53e6f79cb89f2c">More...</a><br /></td></tr>
<tr class="separator:a1ea00a7b13dc2b804f53e6f79cb89f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aff3bf982a86299e69b007b0d16a45227"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227">keyboard_action</a> { <br />
&#160;&#160;<a class="el" href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227a6e70a672c8edfbcdf18c8204913e285d">PRESS</a>, 
<a class="el" href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227ad590443978dc58d64aed5001f56efcdf">RELEASE</a>, 
<a class="el" href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227a8d4eabbc4bcabbbf8b7367850cd13f08">PRESS_RELEASE</a>, 
<a class="el" href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227a64b216d07776d1f5df5f7ad88c73fcab">PRESS_RELEASE_BUTTON</a>, 
<br />
&#160;&#160;<a class="el" href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227a61aa7ff70b76bff0fda378cf61d6afbc">WRITE</a>
<br />
 }<tr class="memdesc:aff3bf982a86299e69b007b0d16a45227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of keyboard action which should be triggered by this task.  <a href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:aff3bf982a86299e69b007b0d16a45227"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8ff4618047a049178bfb1d60abfefb5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__kbd_8h.html#a8ff4618047a049178bfb1d60abfefb5d">task_keyboard</a> (<a class="el" href="task__kbd_8h.html#a1ea00a7b13dc2b804f53e6f79cb89f2c">taskKeyboardConfig_t</a> *param)</td></tr>
<tr class="memdesc:a8ff4618047a049178bfb1d60abfefb5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">FUNCTIONAL TASK - trigger keyboard actions.  <a href="#a8ff4618047a049178bfb1d60abfefb5d">More...</a><br /></td></tr>
<tr class="separator:a8ff4618047a049178bfb1d60abfefb5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>FUNCTIONAL TASK - trigger keyboard actions. </p>
<p>This file contains the task implementation for keyboard key triggering. This task is started by the configuration task and it is assigned to one virtual button or triggered as single shot. As soon as this button is triggered, the configured keys are sent to either USB, BLE or both. This task can be deleted all the time to change the configuration of one button.</p>
<p>Keycode configuration is set via taskKeyboardConfig_t.</p>
<dl class="section warning"><dt>Warning</dt><dd>Parsing of key identifiers and text is NOT done here. Due to performance reasons, parsing is done prior to initialising/calling this task.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__kbd_8h.html#a1ea00a7b13dc2b804f53e6f79cb89f2c" title="Config for task_keyboard. ">taskKeyboardConfig_t</a> </dd>
<dd>
<a class="el" href="common_8h.html#a784ceb4b2d4c4fb77baa99646c6e5035">VB_SINGLESHOT</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="task__kbd_8h_source.html">task_kbd.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af1d6b3680a52c16cd778420b8953eab7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d6b3680a52c16cd778420b8953eab7">&#9670;&nbsp;</a></span>TASK_KEYBOARD_PARAMETERLENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TASK_KEYBOARD_PARAMETERLENGTH&#160;&#160;&#160;45</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count of keycodes for parameter array for keycodes. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__kbd_8h.html#a1ea00a7b13dc2b804f53e6f79cb89f2c" title="Config for task_keyboard. ">taskKeyboardConfig_t</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__kbd_8h_source.html#l00064">64</a> of file <a class="el" href="task__kbd_8h_source.html">task_kbd.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00532">doKeyboardParsing()</a>, and <a class="el" href="task__kbd_8c_source.html#l00077">task_keyboard()</a>.</p>

</div>
</div>
<a id="a0a795efc5a0066d74b5855a17665203e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a795efc5a0066d74b5855a17665203e">&#9670;&nbsp;</a></span>TASK_KEYBOARD_STACKSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TASK_KEYBOARD_STACKSIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stacksize for this functional task. </p>

<p class="definition">Definition at line <a class="el" href="task__kbd_8h_source.html#l00061">61</a> of file <a class="el" href="task__kbd_8h_source.html">task_kbd.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00187">configSwitcherTask()</a>.</p>

</div>
</div>
<a id="a45ba202b05caf39795aeca91b0ae547e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45ba202b05caf39795aeca91b0ae547e">&#9670;&nbsp;</a></span>TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMEOUT&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timeout for queue sending of keyboard commands [ticks]. </p>

<p class="definition">Definition at line <a class="el" href="task__kbd_8h_source.html#l00059">59</a> of file <a class="el" href="task__kbd_8h_source.html">task_kbd.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__kbd_8c_source.html#l00057">sendKbd()</a>, and <a class="el" href="task__mouse_8c_source.html#l00076">task_mouse()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a1ea00a7b13dc2b804f53e6f79cb89f2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea00a7b13dc2b804f53e6f79cb89f2c">&#9670;&nbsp;</a></span>taskKeyboardConfig_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtaskKeyboardConfig.html">taskKeyboardConfig</a>  <a class="el" href="task__kbd_8h.html#a1ea00a7b13dc2b804f53e6f79cb89f2c">taskKeyboardConfig_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Config for task_keyboard. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__kbd_8h.html#a8ff4618047a049178bfb1d60abfefb5d" title="FUNCTIONAL TASK - trigger keyboard actions. ">task_keyboard</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aff3bf982a86299e69b007b0d16a45227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3bf982a86299e69b007b0d16a45227">&#9670;&nbsp;</a></span>keyboard_action</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="task__kbd_8h.html#aff3bf982a86299e69b007b0d16a45227">keyboard_action</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of keyboard action which should be triggered by this task. </p>
<p>Following types of keyboard actions are possible: <br />
</p><ul>
<li><b>PRESS:</b> all of the given keycodes are pressed</li>
<li><b>RELEASE:</b> all of the given keycodes are released</li>
<li><b>PRESS_RELEASE:</b> all of the given keycodes are pressed and immediately released</li>
<li><b>PRESS_RELEASE_BUTTON:</b> all of the given keycodes are pressed and released if the virtual button is released</li>
<li><b>WRITE:</b> simply write the given string (can ASCII as well as unicode) by pressing &amp; releasing all necessary keys </li>
</ul>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aff3bf982a86299e69b007b0d16a45227a6e70a672c8edfbcdf18c8204913e285d"></a>PRESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aff3bf982a86299e69b007b0d16a45227ad590443978dc58d64aed5001f56efcdf"></a>RELEASE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aff3bf982a86299e69b007b0d16a45227a8d4eabbc4bcabbbf8b7367850cd13f08"></a>PRESS_RELEASE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aff3bf982a86299e69b007b0d16a45227a64b216d07776d1f5df5f7ad88c73fcab"></a>PRESS_RELEASE_BUTTON&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aff3bf982a86299e69b007b0d16a45227a61aa7ff70b76bff0fda378cf61d6afbc"></a>WRITE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="task__kbd_8h_source.html#l00076">76</a> of file <a class="el" href="task__kbd_8h_source.html">task_kbd.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8ff4618047a049178bfb1d60abfefb5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ff4618047a049178bfb1d60abfefb5d">&#9670;&nbsp;</a></span>task_keyboard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_keyboard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="task__kbd_8h.html#a1ea00a7b13dc2b804f53e6f79cb89f2c">taskKeyboardConfig_t</a> *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FUNCTIONAL TASK - trigger keyboard actions. </p>
<p>This task is used to trigger keyboard actions, as it is defined in taskKeyboardConfig_t. Can be used as singleshot method by using VB_SINGLESHOT as virtual button configuration. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a784ceb4b2d4c4fb77baa99646c6e5035">VB_SINGLESHOT</a> </dd>
<dd>
<a class="el" href="task__kbd_8h.html#a1ea00a7b13dc2b804f53e6f79cb89f2c" title="Config for task_keyboard. ">taskKeyboardConfig_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>Task configuration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="task__kbd_8c_source.html#l00077">77</a> of file <a class="el" href="task__kbd_8c_source.html">task_kbd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00187">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_cgraph.png" border="0" usemap="#task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_cgraph" alt=""/></div>
<map name="task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_cgraph" id="task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_cgraph">
<area shape="rect" id="node2" href="task__kbd_8c.html#a7d605cb2407a7a7309911c70e28a9884" title="Helper function sending to queues depending on connection type. " alt="" coords="160,5,233,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_icgraph.png" border="0" usemap="#task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_icgraph" alt=""/></div>
<map name="task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_icgraph" id="task__kbd_8h_a8ff4618047a049178bfb1d60abfefb5d_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="160,5,297,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="345,5,472,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="520,5,599,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
