<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/config_switcher.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">config_switcher.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CONTINOUS TASK + FUNCTIONAL TASK - This module takes care of configuration loading.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;esp_log.h&quot;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__adc_8h_source.html">hal_adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__io_8h_source.html">hal_io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__ble_8h_source.html">hal_ble.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__serial_8h_source.html">hal_serial.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__kbd_8h_source.html">task_kbd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__mouse_8h_source.html">task_mouse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__debouncer_8h_source.html">task_debouncer.h</a>&quot;</code><br />
</div>
<p><a href="config__switcher_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtaskConfigSwitcherConfig.html">taskConfigSwitcherConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameter for functional task task_configswitcher.  <a href="structtaskConfigSwitcherConfig.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2eb976695a3c5db9b4ddf53ac58bd0b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8h.html#a2eb976695a3c5db9b4ddf53ac58bd0b1">TASK_CONFIGSWITCHER_STACKSIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="separator:a2eb976695a3c5db9b4ddf53ac58bd0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa6d38946df351bfaec1994fdb081e7db"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtaskConfigSwitcherConfig.html">taskConfigSwitcherConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8h.html#aa6d38946df351bfaec1994fdb081e7db">taskConfigSwitcherConfig_t</a></td></tr>
<tr class="memdesc:aa6d38946df351bfaec1994fdb081e7db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameter for functional task task_configswitcher.  <a href="#aa6d38946df351bfaec1994fdb081e7db">More...</a><br /></td></tr>
<tr class="separator:aa6d38946df351bfaec1994fdb081e7db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a083adf41746c3380dcc6dbc099047f2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8h.html#a083adf41746c3380dcc6dbc099047f2e">task_configswitcher</a> (<a class="el" href="config__switcher_8h.html#aa6d38946df351bfaec1994fdb081e7db">taskConfigSwitcherConfig_t</a> *param)</td></tr>
<tr class="memdesc:a083adf41746c3380dcc6dbc099047f2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">FUNCTIONAL TASK - Load another slot.  <a href="#a083adf41746c3380dcc6dbc099047f2e">More...</a><br /></td></tr>
<tr class="separator:a083adf41746c3380dcc6dbc099047f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafed047c8d04b814a85239e031cbad7b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b">configSwitcherInit</a> (void)</td></tr>
<tr class="memdesc:aafed047c8d04b814a85239e031cbad7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializing the config switching functionality.  <a href="#aafed047c8d04b814a85239e031cbad7b">More...</a><br /></td></tr>
<tr class="separator:aafed047c8d04b814a85239e031cbad7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a921538bec34d128a44a748fd5a2c391f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8h.html#a921538bec34d128a44a748fd5a2c391f">configGetCurrent</a> (void)</td></tr>
<tr class="memdesc:a921538bec34d128a44a748fd5a2c391f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current config struct.  <a href="#a921538bec34d128a44a748fd5a2c391f">More...</a><br /></td></tr>
<tr class="separator:a921538bec34d128a44a748fd5a2c391f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20db6aabb98f5c9c7cea48e950bada5b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8h.html#a20db6aabb98f5c9c7cea48e950bada5b">configUpdateVB</a> (void *param, <a class="el" href="common_8h.html#ac27b6f4710923c6689834e86aea228ac">command_type_t</a> type, uint8_t vb)</td></tr>
<tr class="memdesc:a20db6aabb98f5c9c7cea48e950bada5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update one virtual button.  <a href="#a20db6aabb98f5c9c7cea48e950bada5b">More...</a><br /></td></tr>
<tr class="separator:a20db6aabb98f5c9c7cea48e950bada5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c2e410d8032c65c0700c6ca07429074"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8h.html#a4c2e410d8032c65c0700c6ca07429074">configUpdate</a> (void)</td></tr>
<tr class="memdesc:a4c2e410d8032c65c0700c6ca07429074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger a config update.  <a href="#a4c2e410d8032c65c0700c6ca07429074">More...</a><br /></td></tr>
<tr class="separator:a4c2e410d8032c65c0700c6ca07429074"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CONTINOUS TASK + FUNCTIONAL TASK - This module takes care of configuration loading. </p>
<p>The config_switcher module is used to control all tasks assigned to virtual buttons (called FUNCTIONAL TASKS). If a new configuration should be loaded from the storage, all previously loaded tasks are deleted and new tasks are loaded.</p>
<p>A slot configuration is provided by the config_storage, which is controlled by this module.</p>
<p>task_configswitcher is the FUNCTIONAL TASK for triggering a slot switch. configSwitcherTask is the CONTINOUS TASK which monitors the queue for any config switching action.</p>
<dl class="section note"><dt>Note</dt><dd>If you want to add a new FUNCTIONAL TASK, please include headers here &amp; add loading functionality to configSwitcherTask.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>How to do the reverse parsing of config to AT commands? </dd></dl>

<p class="definition">Definition in file <a class="el" href="config__switcher_8h_source.html">config_switcher.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a2eb976695a3c5db9b4ddf53ac58bd0b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb976695a3c5db9b4ddf53ac58bd0b1">&#9670;&nbsp;</a></span>TASK_CONFIGSWITCHER_STACKSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TASK_CONFIGSWITCHER_STACKSIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stacksize for functional task task_configswitcher. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="config__switcher_8h.html#a083adf41746c3380dcc6dbc099047f2e" title="FUNCTIONAL TASK - Load another slot. ">task_configswitcher</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8h_source.html#l00066">66</a> of file <a class="el" href="config__switcher_8h_source.html">config_switcher.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00187">configSwitcherTask()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aa6d38946df351bfaec1994fdb081e7db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d38946df351bfaec1994fdb081e7db">&#9670;&nbsp;</a></span>taskConfigSwitcherConfig_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtaskConfigSwitcherConfig.html">taskConfigSwitcherConfig</a>  <a class="el" href="config__switcher_8h.html#aa6d38946df351bfaec1994fdb081e7db">taskConfigSwitcherConfig_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parameter for functional task task_configswitcher. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="config__switcher_8h.html#a083adf41746c3380dcc6dbc099047f2e" title="FUNCTIONAL TASK - Load another slot. ">task_configswitcher</a> </dd>
<dd>
<a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a921538bec34d128a44a748fd5a2c391f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921538bec34d128a44a748fd5a2c391f">&#9670;&nbsp;</a></span>configGetCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a>* configGetCurrent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current config struct. </p>
<p>This method is used to get a reference to the current config struct. The caller can use this reference to change the configuration and update the config afterwards (via the config_switcher queue).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd>
<dd>
currentConfig </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the current config struct </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>Do we need locking here (mutex)? </dd></dl>
<p>This method is used to get a reference to the current config struct. The caller can use this reference to change the configuration and update the config afterwards (via the config_switcher queue).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd>
<dd>
<a class="el" href="config__switcher_8c.html#a73c577cdbcaa9439f9458a9e5d39c143">currentConfigLoaded</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the current config struct </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Do we need locking here (mutex)? </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00103">103</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00391">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00532">doKeyboardParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00122">doMouthpieceSettingsParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00295">doStorageParsing()</a>, <a class="el" href="hal__ble_8c_source.html#l00181">halBleTaskKeyboardPress()</a>, and <a class="el" href="hal__ble_8c_source.html#l00253">halBleTaskKeyboardRelease()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8h_a921538bec34d128a44a748fd5a2c391f_icgraph.png" border="0" usemap="#config__switcher_8h_a921538bec34d128a44a748fd5a2c391f_icgraph" alt=""/></div>
<map name="config__switcher_8h_a921538bec34d128a44a748fd5a2c391f_icgraph" id="config__switcher_8h_a921538bec34d128a44a748fd5a2c391f_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#ad105bde7fe8d6d94d079bd3e5d2851e6" title="doGeneralCmdParsing" alt="" coords="195,5,349,32"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a9c2c2534851b17120566b9935dddd3ad" title="doKeyboardParsing" alt="" coords="205,56,339,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a9b1c8742af67b0bb373493f215e98a0c" title="doMouthpieceSettingsParsing" alt="" coords="175,107,369,133"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a1dae0050b84acac33aae21926695c8c7" title="doStorageParsing" alt="" coords="209,157,335,184"/>
<area shape="rect" id="node6" href="hal__ble_8c.html#af6a15e1396cb358cd7f1eb6a2a7045a9" title="halBleTaskKeyboardPress" alt="" coords="184,208,360,235"/>
<area shape="rect" id="node7" href="hal__ble_8c.html#adbfa982381d6d09432d7ba1961846b32" title="halBleTaskKeyboardRelease" alt="" coords="177,259,367,285"/>
</map>
</div>

</div>
</div>
<a id="aafed047c8d04b814a85239e031cbad7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafed047c8d04b814a85239e031cbad7b">&#9670;&nbsp;</a></span>configSwitcherInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t configSwitcherInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializing the config switching functionality. </p>
<p>The CONTINOUS task will be loaded to enable slot switches via the task_configswitcher FUNCTIONAL task. </p><dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fined, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00457">457</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_cgraph.png" border="0" usemap="#config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_cgraph" alt=""/></div>
<map name="config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_cgraph" id="config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_cgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="180,361,317,388"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f" title="halStorageStartTransaction" alt="" coords="369,32,549,59"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="halStorageLoad" alt="" coords="403,83,515,109"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#a5fe9e276fd05e50e4ab9d554ef6f58ca" title="Delete one or all slots. " alt="" coords="836,108,981,135"/>
<area shape="rect" id="node8" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="826,184,991,211"/>
<area shape="rect" id="node11" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="halStorageFinishTransaction" alt="" coords="365,235,552,261"/>
<area shape="rect" id="node12" href="hal__storage_8c.html#a75596c64adaa2b8d9104530acc94b094" title="halStorageLoadName" alt="" coords="385,285,532,312"/>
<area shape="rect" id="node15" href="hal__adc_8c.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="387,336,530,363"/>
<area shape="rect" id="node19" href="hal__ble_8c.html#accf307974a0046bce38582d0260bf841" title="halBLEReset" alt="" coords="409,387,508,413"/>
<area shape="rect" id="node20" href="hal__serial_8c.html#ab2261f95747ee5806ebdec880d09ca89" title="Reset the serial HID report data. " alt="" coords="405,437,512,464"/>
<area shape="rect" id="node22" href="task__mouse_8c.html#aa8f5c0436e569589e735c419fc3d0ed8" title="FUNCTIONAL TASK &#45; Trigger mouse action. " alt="" coords="412,488,505,515"/>
<area shape="rect" id="node23" href="task__kbd_8c.html#a8ff4618047a049178bfb1d60abfefb5d" title="FUNCTIONAL TASK &#45; trigger keyboard actions. " alt="" coords="405,539,512,565"/>
<area shape="rect" id="node25" href="config__switcher_8c.html#a083adf41746c3380dcc6dbc099047f2e" title="FUNCTIONAL TASK &#45; Load another slot. " alt="" coords="389,589,528,616"/>
<area shape="rect" id="node26" href="hal__adc_8c.html#a3217185bc86562dee8617ded3872022f" title="FUNCTIONAL TASK &#45; Trigger zero&#45;point calibration of mouthpiece. " alt="" coords="402,640,515,667"/>
<area shape="rect" id="node28" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. " alt="" coords="811,601,1007,628"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6" title="halStorageGetNumberOfSlots" alt="" coords="811,7,1006,33"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="halStorageChecks" alt="" coords="1308,159,1437,185"/>
<area shape="rect" id="node9" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="1100,83,1215,109"/>
<area shape="rect" id="node10" href="hal__storage_8c.html#a1503debb336ea2d708e4e0884c7aa6a3" title="Store a virtual button config struct. " alt="" coords="1058,133,1257,160"/>
<area shape="rect" id="node13" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141" title="halStorageGetNumberForName" alt="" coords="1055,285,1260,312"/>
<area shape="rect" id="node14" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422" title="halStorageLoadNumber" alt="" coords="602,235,761,261"/>
<area shape="rect" id="node16" href="hal__adc_8c.html#aadc294c08df0386572ffdc8e7228f6b4" title="HAL TASK &#45; Mouse task for ADC. " alt="" coords="616,336,747,363"/>
<area shape="rect" id="node17" href="hal__adc_8c.html#a452077aaa6a576304708d00d4ec439f1" title="HAL TASK &#45; Joystick task for ADC. " alt="" coords="611,387,751,413"/>
<area shape="rect" id="node18" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="607,437,755,464"/>
<area shape="rect" id="node21" href="hal__serial_8c.html#a8f987ba001c2a39c959a551a94b5df43" title="halSerialSendUSBSerial" alt="" coords="600,488,763,515"/>
<area shape="rect" id="node24" href="task__kbd_8c.html#a7d605cb2407a7a7309911c70e28a9884" title="Helper function sending to queues depending on connection type. " alt="" coords="645,539,718,565"/>
<area shape="rect" id="node27" href="hal__adc_8c.html#ae549c157d94729e8b06cb391f0f2c97b" title="Calibration function. " alt="" coords="624,640,739,667"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_icgraph.png" border="0" usemap="#config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_icgraph" alt=""/></div>
<map name="config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_icgraph" id="config__switcher_8h_aafed047c8d04b814a85239e031cbad7b_icgraph">
<area shape="rect" id="node2" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="180,5,259,32"/>
</map>
</div>

</div>
</div>
<a id="a4c2e410d8032c65c0700c6ca07429074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c2e410d8032c65c0700c6ca07429074">&#9670;&nbsp;</a></span>configUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t configUpdate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trigger a config update. </p>
<p>This method is simply sending an "__UPDATE" command to the config_switcher queue to trigger an update by re-loading the currentConfig.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd>
<dd>
currentConfig </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00118">118</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00150">configUpdateVB()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8h_a4c2e410d8032c65c0700c6ca07429074_icgraph.png" border="0" usemap="#config__switcher_8h_a4c2e410d8032c65c0700c6ca07429074_icgraph" alt=""/></div>
<map name="config__switcher_8h_a4c2e410d8032c65c0700c6ca07429074_icgraph" id="config__switcher_8h_a4c2e410d8032c65c0700c6ca07429074_icgraph">
<area shape="rect" id="node2" href="config__switcher_8h.html#a20db6aabb98f5c9c7cea48e950bada5b" title="Update one virtual button. " alt="" coords="152,5,269,32"/>
</map>
</div>

</div>
</div>
<a id="a20db6aabb98f5c9c7cea48e950bada5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20db6aabb98f5c9c7cea48e950bada5b">&#9670;&nbsp;</a></span>configUpdateVB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t configUpdateVB </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#ac27b6f4710923c6689834e86aea228ac">command_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>vb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update one virtual button. </p>
<p>This function is used to update one virtual button config. For example it is triggered by "AT BM xx" and the following AT command. It saves the param pointer to the update param array and calls configUpdate to trigger the reload. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="config__switcher_8h.html#a4c2e410d8032c65c0700c6ca07429074" title="Trigger a config update. ">configUpdate</a> </dd>
<dd>
<a class="el" href="config__switcher_8c.html#aceb033b9bef9bb354a3b2c4734b4ec9d" title="Array of pointers to FUNCTIONAL task parameters (for updating current config) ">currentTaskParametersUpdate</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>FUNCTIONAL task parameter memory </td></tr>
    <tr><td class="paramname">type</td><td>Type of new VB command </td></tr>
    <tr><td class="paramname">vb</td><td>Number of virtualbutton to update </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00150">150</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8h_a20db6aabb98f5c9c7cea48e950bada5b_cgraph.png" border="0" usemap="#config__switcher_8h_a20db6aabb98f5c9c7cea48e950bada5b_cgraph" alt=""/></div>
<map name="config__switcher_8h_a20db6aabb98f5c9c7cea48e950bada5b_cgraph" id="config__switcher_8h_a20db6aabb98f5c9c7cea48e950bada5b_cgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#a4c2e410d8032c65c0700c6ca07429074" title="Trigger a config update. " alt="" coords="171,5,269,32"/>
</map>
</div>

</div>
</div>
<a id="a083adf41746c3380dcc6dbc099047f2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a083adf41746c3380dcc6dbc099047f2e">&#9670;&nbsp;</a></span>task_configswitcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_configswitcher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="config__switcher_8h.html#aa6d38946df351bfaec1994fdb081e7db">taskConfigSwitcherConfig_t</a> *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FUNCTIONAL TASK - Load another slot. </p>
<p>This task is used to switch the configuration to another slot. It is possible to load a slot by name or a previous/next/default slot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>Task configuration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="config__switcher_8h.html#aa6d38946df351bfaec1994fdb081e7db" title="Parameter for functional task task_configswitcher. ">taskConfigSwitcherConfig_t</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00402">402</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00187">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8h_a083adf41746c3380dcc6dbc099047f2e_icgraph.png" border="0" usemap="#config__switcher_8h_a083adf41746c3380dcc6dbc099047f2e_icgraph" alt=""/></div>
<map name="config__switcher_8h_a083adf41746c3380dcc6dbc099047f2e_icgraph" id="config__switcher_8h_a083adf41746c3380dcc6dbc099047f2e_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="192,5,329,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="377,5,504,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="552,5,631,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
