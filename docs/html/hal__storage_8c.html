<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/hal/hal_storage.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_2c1795b0295572423fca70fe6201093a.html">hal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hal_storage.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>&quot;</code><br />
</div>
<p><a href="hal__storage_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;hal_storage&quot;</td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a63ec8e05a2bb4c214600e94b8ab05eea">halStorageNVSLoadString</a> (const char *key, char *string)</td></tr>
<tr class="memdesc:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a string from NVS (global, no slot assignment)  <a href="#a63ec8e05a2bb4c214600e94b8ab05eea">More...</a><br /></td></tr>
<tr class="separator:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aa545d76c7dcaafc129a03dfd9706ca7b">halStorageNVSStoreString</a> (const char *key, char *string)</td></tr>
<tr class="memdesc:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a string into NVS (global, no slot assignment)  <a href="#aa545d76c7dcaafc129a03dfd9706ca7b">More...</a><br /></td></tr>
<tr class="separator:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a18ba4afaa3fc6e4c16180a79c330ad41">halStorageGetFree</a> (uint32_t *total, uint32_t *free)</td></tr>
<tr class="memdesc:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get free memory (IR &amp; slot storage)  <a href="#a18ba4afaa3fc6e4c16180a79c330ad41">More...</a><br /></td></tr>
<tr class="separator:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1">halStorageInit</a> (void)</td></tr>
<tr class="memdesc:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">internal function to init the filesystem if handle is invalid  <a href="#a606e5842dd354f1fb4a738ba95c6d5d1">More...</a><br /></td></tr>
<tr class="separator:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6566ef5b69c85d422df52435c95d36"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36">halStorageChecks</a> (uint32_t tid)</td></tr>
<tr class="memdesc:a4b6566ef5b69c85d422df52435c95d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helper to check for a valid WL handle and the correct tid.  <a href="#a4b6566ef5b69c85d422df52435c95d36">More...</a><br /></td></tr>
<tr class="separator:a4b6566ef5b69c85d422df52435c95d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba">halStorageCreateDefault</a> (uint32_t tid)</td></tr>
<tr class="memdesc:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new default slot.  <a href="#aed4beb2e1bd8cd78a201fbcb49958cba">More...</a><br /></td></tr>
<tr class="separator:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5da838bef47becbd2b5bd96a60c75b3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aa5da838bef47becbd2b5bd96a60c75b3">halStorageGetCurrentSlotNumber</a> (void)</td></tr>
<tr class="memdesc:aa5da838bef47becbd2b5bd96a60c75b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of currently loaded slot.  <a href="#aa5da838bef47becbd2b5bd96a60c75b3">More...</a><br /></td></tr>
<tr class="separator:aa5da838bef47becbd2b5bd96a60c75b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0a934f829b47e2445189dd95e962d6"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6">halStorageGetNumberOfSlots</a> (uint32_t tid, uint8_t *slotsavailable)</td></tr>
<tr class="memdesc:a7e0a934f829b47e2445189dd95e962d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of stored slots.  <a href="#a7e0a934f829b47e2445189dd95e962d6">More...</a><br /></td></tr>
<tr class="separator:a7e0a934f829b47e2445189dd95e962d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53912e9159b29e5fc974a127dbf0982f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a53912e9159b29e5fc974a127dbf0982f">halStorageGetNameForNumberIR</a> (uint32_t tid, uint8_t slotnumber, char *cmdName)</td></tr>
<tr class="memdesc:a53912e9159b29e5fc974a127dbf0982f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of an infrared command stored at the given slot number.  <a href="#a53912e9159b29e5fc974a127dbf0982f">More...</a><br /></td></tr>
<tr class="separator:a53912e9159b29e5fc974a127dbf0982f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a8347d2c8df82d17bc9af1d007bfd11ae">halStorageDeleteIRCmd</a> (uint8_t slotnr, uint32_t tid)</td></tr>
<tr class="memdesc:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one or all IR commands.  <a href="#a8347d2c8df82d17bc9af1d007bfd11ae">More...</a><br /></td></tr>
<tr class="separator:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1495c793604980c76b334f6a6d553c3c"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a1495c793604980c76b334f6a6d553c3c">halStorageGetNumberOfIRCmds</a> (uint32_t tid, uint8_t *slotsavailable)</td></tr>
<tr class="memdesc:a1495c793604980c76b334f6a6d553c3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of stored IR commands.  <a href="#a1495c793604980c76b334f6a6d553c3c">More...</a><br /></td></tr>
<tr class="separator:a1495c793604980c76b334f6a6d553c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e6fcc8c1bdff7f78009830bc78f260"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260">halStorageGetFreeIRCmdSlot</a> (uint32_t tid, uint8_t *slotavailable)</td></tr>
<tr class="memdesc:ae5e6fcc8c1bdff7f78009830bc78f260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of first available slot for an IR command.  <a href="#ae5e6fcc8c1bdff7f78009830bc78f260">More...</a><br /></td></tr>
<tr class="separator:ae5e6fcc8c1bdff7f78009830bc78f260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2046481d14910cc6a5b0086a796f293b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b">halStorageGetNameForNumber</a> (uint32_t tid, uint8_t slotnumber, char *slotname)</td></tr>
<tr class="memdesc:a2046481d14910cc6a5b0086a796f293b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of a slot number.  <a href="#a2046481d14910cc6a5b0086a796f293b">More...</a><br /></td></tr>
<tr class="separator:a2046481d14910cc6a5b0086a796f293b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae19bcf97360ccd7af4ddf906ff85141"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141">halStorageGetNumberForName</a> (uint32_t tid, uint8_t *slotnumber, char *slotname)</td></tr>
<tr class="memdesc:aae19bcf97360ccd7af4ddf906ff85141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of a slotname.  <a href="#aae19bcf97360ccd7af4ddf906ff85141">More...</a><br /></td></tr>
<tr class="separator:aae19bcf97360ccd7af4ddf906ff85141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a531bc39bc2808762298d14b79ac453cd"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a531bc39bc2808762298d14b79ac453cd">halStorageGetNumberForNameIR</a> (uint32_t tid, uint8_t *slotnumber, char *cmdName)</td></tr>
<tr class="memdesc:a531bc39bc2808762298d14b79ac453cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of an IR command.  <a href="#a531bc39bc2808762298d14b79ac453cd">More...</a><br /></td></tr>
<tr class="separator:a531bc39bc2808762298d14b79ac453cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5b764e7c611ff24dbcdd872dc9ae76"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aad5b764e7c611ff24dbcdd872dc9ae76">halStorageLoad</a> (<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> navigate, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="memdesc:aad5b764e7c611ff24dbcdd872dc9ae76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by an action.  <a href="#aad5b764e7c611ff24dbcdd872dc9ae76">More...</a><br /></td></tr>
<tr class="separator:aad5b764e7c611ff24dbcdd872dc9ae76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1b266074bd493fe43dcf980852a422"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422">halStorageLoadNumber</a> (uint8_t slotnumber, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="memdesc:a3b1b266074bd493fe43dcf980852a422"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by a slot number (starting with 1, 0 is default slot)  <a href="#a3b1b266074bd493fe43dcf980852a422">More...</a><br /></td></tr>
<tr class="separator:a3b1b266074bd493fe43dcf980852a422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75596c64adaa2b8d9104530acc94b094"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a75596c64adaa2b8d9104530acc94b094">halStorageLoadName</a> (char *slotname, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="memdesc:a75596c64adaa2b8d9104530acc94b094"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by a slot name.  <a href="#a75596c64adaa2b8d9104530acc94b094">More...</a><br /></td></tr>
<tr class="separator:a75596c64adaa2b8d9104530acc94b094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">halStorageDeleteSlot</a> (int16_t slotnr, uint32_t tid)</td></tr>
<tr class="memdesc:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one or all slots.  <a href="#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">More...</a><br /></td></tr>
<tr class="separator:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc699ff3996d12d3e6bcc9e372b277e0"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0">halStorageLoadGetVBConfigs</a> (uint8_t vb, void *vb_config, size_t vb_config_size, uint32_t tid)</td></tr>
<tr class="memdesc:abc699ff3996d12d3e6bcc9e372b277e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load one virtual button config for currently loaded slot.  <a href="#abc699ff3996d12d3e6bcc9e372b277e0">More...</a><br /></td></tr>
<tr class="separator:abc699ff3996d12d3e6bcc9e372b277e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadf9ff06990d0f0af2eea2e6f2b8082a"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a">halStorageStore</a> (uint32_t tid, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, char *slotname, uint8_t slotnumber)</td></tr>
<tr class="memdesc:aadf9ff06990d0f0af2eea2e6f2b8082a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a generalConfig_t struct.  <a href="#aadf9ff06990d0f0af2eea2e6f2b8082a">More...</a><br /></td></tr>
<tr class="separator:aadf9ff06990d0f0af2eea2e6f2b8082a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0ac79b0e2b273d97e5b806de9eb493"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ace0ac79b0e2b273d97e5b806de9eb493">halStorageStoreIR</a> (uint32_t tid, <a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *cfg, char *cmdName)</td></tr>
<tr class="memdesc:ace0ac79b0e2b273d97e5b806de9eb493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store an infrared command to storage.  <a href="#ace0ac79b0e2b273d97e5b806de9eb493">More...</a><br /></td></tr>
<tr class="separator:ace0ac79b0e2b273d97e5b806de9eb493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a046daab088cb37e318c07c2728ade9d3"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a046daab088cb37e318c07c2728ade9d3">halStorageStoreSetVBConfigs</a> (uint8_t slotnumber, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *config, uint32_t tid)</td></tr>
<tr class="memdesc:a046daab088cb37e318c07c2728ade9d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a virtual button config struct.  <a href="#a046daab088cb37e318c07c2728ade9d3">More...</a><br /></td></tr>
<tr class="separator:a046daab088cb37e318c07c2728ade9d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa728fac6a17066ecb910c19338ae5288"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aa728fac6a17066ecb910c19338ae5288">halStorageLoadIR</a> (char *cmdName, <a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="memdesc:aa728fac6a17066ecb910c19338ae5288"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load an IR command by name.  <a href="#aa728fac6a17066ecb910c19338ae5288">More...</a><br /></td></tr>
<tr class="separator:aa728fac6a17066ecb910c19338ae5288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead99606f84645b2bb6ae000461bf819"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819">halStorageStartTransaction</a> (uint32_t *tid, TickType_t tickstowait, const char *caller)</td></tr>
<tr class="memdesc:aead99606f84645b2bb6ae000461bf819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a storage transaction.  <a href="#aead99606f84645b2bb6ae000461bf819">More...</a><br /></td></tr>
<tr class="separator:aead99606f84645b2bb6ae000461bf819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> (uint32_t tid)</td></tr>
<tr class="memdesc:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish a storage transaction.  <a href="#a00b5db14e24d7ada8a42aa6b3f1a1cb7">More...</a><br /></td></tr>
<tr class="separator:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe54e8f771b85765a57fb799302f2a09"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#afe54e8f771b85765a57fb799302f2a09">halStorageMutex</a> = NULL</td></tr>
<tr class="memdesc:afe54e8f771b85765a57fb799302f2a09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex which is used to avoid multiple access to different loaded slots.  <a href="#afe54e8f771b85765a57fb799302f2a09">More...</a><br /></td></tr>
<tr class="separator:afe54e8f771b85765a57fb799302f2a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7bc6f83a4f91dba2d5b3d1edeedf4b1"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1">storageCurrentTID</a> = 0</td></tr>
<tr class="memdesc:ab7bc6f83a4f91dba2d5b3d1edeedf4b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently active transaction ID, 0 is invalid.  <a href="#ab7bc6f83a4f91dba2d5b3d1edeedf4b1">More...</a><br /></td></tr>
<tr class="separator:ab7bc6f83a4f91dba2d5b3d1edeedf4b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c097404b5dfa34bdac65865586dac5a"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a5c097404b5dfa34bdac65865586dac5a">storageCurrentSlotNumber</a> = 0</td></tr>
<tr class="memdesc:a5c097404b5dfa34bdac65865586dac5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently activated slot number.  <a href="#a5c097404b5dfa34bdac65865586dac5a">More...</a><br /></td></tr>
<tr class="separator:a5c097404b5dfa34bdac65865586dac5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5f3387fe559c96c7523a59e28b0a74b"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ab5f3387fe559c96c7523a59e28b0a74b">storageCurrentVBNumber</a> = 0</td></tr>
<tr class="memdesc:ab5f3387fe559c96c7523a59e28b0a74b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently used VB number.  <a href="#ab5f3387fe559c96c7523a59e28b0a74b">More...</a><br /></td></tr>
<tr class="separator:ab5f3387fe559c96c7523a59e28b0a74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d1f6636715d2cd2af21e20bc5e26afa"><td class="memItemLeft" align="right" valign="top">static wl_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a9d1f6636715d2cd2af21e20bc5e26afa">s_wl_handle</a> = WL_INVALID_HANDLE</td></tr>
<tr class="memdesc:a9d1f6636715d2cd2af21e20bc5e26afa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wear levelling handle.  <a href="#a9d1f6636715d2cd2af21e20bc5e26afa">More...</a><br /></td></tr>
<tr class="separator:a9d1f6636715d2cd2af21e20bc5e26afa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47050fc742d4864291d317dc39914ad1"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a47050fc742d4864291d317dc39914ad1">base_path</a> = &quot;/spiflash&quot;</td></tr>
<tr class="memdesc:a47050fc742d4864291d317dc39914ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition name (used to define different memory types)  <a href="#a47050fc742d4864291d317dc39914ad1">More...</a><br /></td></tr>
<tr class="separator:a47050fc742d4864291d317dc39914ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687cf5b473fc94d8fafca390fcc11a1f"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a687cf5b473fc94d8fafca390fcc11a1f">storageCurrentTIDHolder</a> [32]</td></tr>
<tr class="memdesc:a687cf5b473fc94d8fafca390fcc11a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current active storage task.  <a href="#a687cf5b473fc94d8fafca390fcc11a1f">More...</a><br /></td></tr>
<tr class="separator:a687cf5b473fc94d8fafca390fcc11a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs. </p>
<p>This module stores general configs &amp; virtual button configurations to a storage area. In case of the ESP32 we use FAT with wear leveling, which is provided by the esp-idf. <b>Warning:</b> Please adjust the esp-idf to us 512Byte sectors and <b>mode "safety"</b>! We don't do any safe copying, just building a checksum to detect faulty slots.</p>
<p>This module can be used to store a config struct (generalConfig_t) and the corresponding virtual button config structs to the storage.</p>
<p>Following commands are implemented here:</p><ul>
<li>list all slot names</li>
<li>load default slot</li>
<li>load next or previous slot</li>
<li>load slot by name or number</li>
<li>store a given slot</li>
<li>delete one slot</li>
<li>delete all slots</li>
<li>delete one or all IR commands</li>
<li>get number of stored IR commands</li>
<li>load an IR command</li>
<li>get names for IR commands</li>
</ul>
<p>This module starts one task on its own for maintaining the storage access. All methods called from this module will block via a semaphore until the requested operation is finished.</p>
<p>For storing small amounts global, non-volatile data, it is possible to use halStorageNVSLoad &amp; halStorageNVSStore operations. In this case, no transaction id is necessary.</p>
<p>Slots are stored in following naming convention (8.3 rule applies here): general slot config: xxx.fms (slot number, e.g., 001.fms for slot 1) virtual button config for slot xxx xxx_VB.fms</p>
<dl class="section note"><dt>Note</dt><dd>Maximum number of slots: 250! (e.g. 250.fms) </dd>
<dd>
Maximum number of IR commands: 100 (0-100, e.g. IR_99.fms) </dd>
<dd>
Use halStorageStartTransaction and halStorageFinishTransaction on begin/end of loading&amp;storing (except for halStorageNVS* operations) </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Adjust the esp-idf (via "make menuconfig") to use 512B sectors and mode <b>safety</b>!</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;hal_storage&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00073">73</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00235">halStorageChecks()</a>, <a class="el" href="hal__storage_8c_source.html#l00263">halStorageCreateDefault()</a>, <a class="el" href="hal__storage_8c_source.html#l00610">halStorageDeleteIRCmd()</a>, <a class="el" href="hal__storage_8c_source.html#l01234">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l01915">halStorageFinishTransaction()</a>, <a class="el" href="hal__storage_8c_source.html#l00722">halStorageGetFreeIRCmdSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00766">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00554">halStorageGetNameForNumberIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00818">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00894">halStorageGetNumberForNameIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00679">halStorageGetNumberOfIRCmds()</a>, <a class="el" href="hal__storage_8c_source.html#l00504">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l00205">halStorageInit()</a>, <a class="el" href="hal__storage_8c_source.html#l00987">halStorageLoad()</a>, <a class="el" href="hal__storage_8c_source.html#l01332">halStorageLoadGetVBConfigs()</a>, <a class="el" href="hal__storage_8c_source.html#l01747">halStorageLoadIR()</a>, <a class="el" href="hal__storage_8c_source.html#l01212">halStorageLoadName()</a>, <a class="el" href="hal__storage_8c_source.html#l01069">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01859">halStorageStartTransaction()</a>, <a class="el" href="hal__storage_8c_source.html#l01449">halStorageStore()</a>, <a class="el" href="hal__storage_8c_source.html#l01546">halStorageStoreIR()</a>, and <a class="el" href="hal__storage_8c_source.html#l01642">halStorageStoreSetVBConfigs()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4b6566ef5b69c85d422df52435c95d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6566ef5b69c85d422df52435c95d36">&#9670;&nbsp;</a></span>halStorageChecks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageChecks </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal helper to check for a valid WL handle and the correct tid. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1" title="Currently active transaction ID, 0 is invalid. ">storageCurrentTID</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Currently used TID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if all checks are valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00235">235</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00263">halStorageCreateDefault()</a>, <a class="el" href="hal__storage_8c_source.html#l00610">halStorageDeleteIRCmd()</a>, <a class="el" href="hal__storage_8c_source.html#l01234">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00722">halStorageGetFreeIRCmdSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00766">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00554">halStorageGetNameForNumberIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00818">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00894">halStorageGetNumberForNameIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00679">halStorageGetNumberOfIRCmds()</a>, <a class="el" href="hal__storage_8c_source.html#l00504">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l01332">halStorageLoadGetVBConfigs()</a>, <a class="el" href="hal__storage_8c_source.html#l01747">halStorageLoadIR()</a>, <a class="el" href="hal__storage_8c_source.html#l01069">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01449">halStorageStore()</a>, <a class="el" href="hal__storage_8c_source.html#l01546">halStorageStoreIR()</a>, and <a class="el" href="hal__storage_8c_source.html#l01642">halStorageStoreSetVBConfigs()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph.png" border="0" usemap="#hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph" alt=""/></div>
<map name="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph" id="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="474,629,639,655"/>
<area shape="rect" id="node14" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="Load a slot by a slot number (starting with 1, 0 is default slot) " alt="" coords="742,654,901,681"/>
<area shape="rect" id="node19" href="hal__storage_8h.html#a8347d2c8df82d17bc9af1d007bfd11ae" title="Delete one or all IR commands. " alt="" coords="475,122,639,149"/>
<area shape="rect" id="node21" href="hal__storage_8h.html#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b" title="Delete one or all slots. " alt="" coords="979,477,1125,503"/>
<area shape="rect" id="node22" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260" title="Get the number of first available slot for an IR command. " alt="" coords="194,223,390,250"/>
<area shape="rect" id="node23" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="492,173,621,199"/>
<area shape="rect" id="node25" href="hal__storage_8h.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="189,375,395,402"/>
<area shape="rect" id="node26" href="hal__storage_8h.html#a53912e9159b29e5fc974a127dbf0982f" title="Get the name of an infrared command stored at the given slot number. " alt="" coords="712,274,931,301"/>
<area shape="rect" id="node27" href="hal__storage_8h.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="454,477,659,503"/>
<area shape="rect" id="node29" href="hal__storage_8h.html#a531bc39bc2808762298d14b79ac453cd" title="Get the number of an IR command. " alt="" coords="183,274,401,301"/>
<area shape="rect" id="node30" href="hal__storage_8h.html#a1495c793604980c76b334f6a6d553c3c" title="Get the number of stored IR commands. " alt="" coords="449,21,664,47"/>
<area shape="rect" id="node31" href="hal__storage_8h.html#a7e0a934f829b47e2445189dd95e962d6" title="Get the number of stored slots. " alt="" coords="459,527,654,554"/>
<area shape="rect" id="node32" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. " alt="" coords="723,767,919,794"/>
<area shape="rect" id="node33" href="hal__storage_8h.html#aa728fac6a17066ecb910c19338ae5288" title="Load an IR command by name. " alt="" coords="229,71,355,98"/>
<area shape="rect" id="node35" href="hal__storage_8h.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="235,578,349,605"/>
<area shape="rect" id="node36" href="hal__storage_8h.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. " alt="" coords="193,679,391,706"/>
<area shape="rect" id="node3" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="775,375,867,402"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="1194,325,1347,351"/>
<area shape="rect" id="node9" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="998,426,1106,453"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1420,451,1539,478"/>
<area shape="rect" id="node6" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1603,534,1735,561"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1591,451,1748,478"/>
<area shape="rect" id="node7" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1796,566,1875,593"/>
<area shape="rect" id="node10" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="1206,375,1335,402"/>
<area shape="rect" id="node11" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="1203,426,1338,453"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="1211,477,1330,503"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="1173,527,1368,554"/>
<area shape="rect" id="node15" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. " alt="" coords="996,679,1108,706"/>
<area shape="rect" id="node18" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. " alt="" coords="979,629,1125,655"/>
<area shape="rect" id="node16" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="1202,629,1339,655"/>
<area shape="rect" id="node17" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1416,603,1543,630"/>
<area shape="rect" id="node20" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="990,173,1114,199"/>
<area shape="rect" id="node24" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="767,173,875,199"/>
<area shape="rect" id="node28" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="759,578,884,605"/>
<area shape="rect" id="node34" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="773,71,870,98"/>
</map>
</div>

</div>
</div>
<a id="aed4beb2e1bd8cd78a201fbcb49958cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4beb2e1bd8cd78a201fbcb49958cba">&#9670;&nbsp;</a></span>halStorageCreateDefault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halStorageCreateDefault </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new default slot. </p>
<p>Create a new default slot in memory. The default settings are hardcoded here to provide a fallback solution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Valid transaction ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000028">Todo:</a></b></dt><dd>Change this default slot to usable settings </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00263">263</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01069">halStorageLoadNumber()</a>, and <a class="el" href="task__commands_8c_source.html#l01589">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph.png" border="0" usemap="#hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" alt=""/></div>
<map name="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" id="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="465,24,595,51"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="261,24,375,51"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. " alt="" coords="219,75,417,102"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph.png" border="0" usemap="#hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" alt=""/></div>
<map name="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" id="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="Load a slot by a slot number (starting with 1, 0 is default slot) " alt="" coords="219,56,377,83"/>
<area shape="rect" id="node8" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="252,107,344,133"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. " alt="" coords="443,5,555,32"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. " alt="" coords="425,56,572,83"/>
<area shape="rect" id="node4" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="649,5,786,32"/>
<area shape="rect" id="node5" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="863,9,989,36"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1243,44,1321,71"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="641,56,794,83"/>
<area shape="rect" id="node13" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="445,157,553,184"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="867,151,985,177"/>
<area shape="rect" id="node11" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1050,75,1182,101"/>
<area shape="rect" id="node12" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1037,151,1195,177"/>
<area shape="rect" id="node14" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="653,107,782,133"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="650,157,785,184"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="658,208,777,235"/>
<area shape="rect" id="node17" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="620,259,815,285"/>
</map>
</div>

</div>
</div>
<a id="a8347d2c8df82d17bc9af1d007bfd11ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8347d2c8df82d17bc9af1d007bfd11ae">&#9670;&nbsp;</a></span>halStorageDeleteIRCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageDeleteIRCmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one or all IR commands. </p>
<p>This function is used to delete one IR command or all commands (depending on parameter slotnr)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use 100 to delete all slots </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Setting slotnr to 100 deletes all IR slots. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00610">610</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00597">doInfraredParsing()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph.png" border="0" usemap="#hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph" alt=""/></div>
<map name="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph" id="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="217,5,347,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph.png" border="0" usemap="#hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph" alt=""/></div>
<map name="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph" id="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="217,31,341,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="389,31,508,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="569,5,701,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="556,56,713,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="761,5,840,32"/>
</map>
</div>

</div>
</div>
<a id="a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">&#9670;&nbsp;</a></span>halStorageDeleteSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageDeleteSlot </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>slotnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one or all slots. </p>
<p>This function is used to delete one slot or all slots (depending on parameter slotnr)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use -1 to delete all slots </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Deleting all slots, means that a complete factory reset is done. Maybe we change this in release versions. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01234">1234</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00280">configSwitcherTask()</a>, and <a class="el" href="task__commands_8c_source.html#l00757">doGeneralCmdParsing()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph.png" border="0" usemap="#hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph" alt=""/></div>
<map name="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph" id="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="199,5,328,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph.png" border="0" usemap="#hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph" alt=""/></div>
<map name="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph" id="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="207,5,344,32"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="199,56,352,83"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="400,5,527,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="780,31,859,57"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="404,56,523,83"/>
<area shape="rect" id="node7" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="587,56,719,83"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="575,107,732,133"/>
</map>
</div>

</div>
</div>
<a id="a00b5db14e24d7ada8a42aa6b3f1a1cb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b5db14e24d7ada8a42aa6b3f1a1cb7">&#9670;&nbsp;</a></span>halStorageFinishTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageFinishTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish a storage transaction. </p>
<p>This method is used to stop a transaction and needs to be called AFTER storage access, enabling other tasks to acquire the storage module.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction to be finished </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is freed, ESP_FAIL if the tid is not valid </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01915">1915</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00280">configSwitcherTask()</a>, <a class="el" href="task__commands_8c_source.html#l00757">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00597">doInfraredParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00391">doStorageParsing()</a>, <a class="el" href="task__infrared_8c_source.html#l00153">infrared_record()</a>, <a class="el" href="task__commands_8c_source.html#l01589">printAllSlots()</a>, <a class="el" href="task__infrared_8c_source.html#l00051">task_infrared()</a>, and <a class="el" href="task__webgui_8c_source.html#l00482">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph.png" border="0" usemap="#hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" alt=""/></div>
<map name="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" id="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="240,80,377,106"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="619,232,773,258"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="426,181,550,208"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="425,460,551,486"/>
<area shape="rect" id="node11" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="255,232,363,258"/>
<area shape="rect" id="node12" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="263,333,355,360"/>
<area shape="rect" id="node18" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="260,130,357,157"/>
<area shape="rect" id="node19" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="847,29,963,56"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="841,80,968,106"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1221,80,1300,106"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="845,308,964,334"/>
<area shape="rect" id="node7" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1029,308,1161,334"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1016,257,1173,284"/>
<area shape="rect" id="node13" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="434,384,542,410"/>
<area shape="rect" id="node14" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="631,282,761,309"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="629,333,763,360"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="637,384,755,410"/>
<area shape="rect" id="node17" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="599,434,793,461"/>
</map>
</div>

</div>
</div>
<a id="aa5da838bef47becbd2b5bd96a60c75b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5da838bef47becbd2b5bd96a60c75b3">&#9670;&nbsp;</a></span>halStorageGetCurrentSlotNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t halStorageGetCurrentSlotNumber </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of currently loaded slot. </p>
<p>An empty device will return 0</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a5c097404b5dfa34bdac65865586dac5a" title="Currently activated slot number. ">storageCurrentSlotNumber</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Currently loaded slot number </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00487">487</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00280">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph.png" border="0" usemap="#hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph" alt=""/></div>
<map name="hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph" id="hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="224,13,361,39"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="409,13,536,39"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="584,13,663,39"/>
</map>
</div>

</div>
</div>
<a id="a18ba4afaa3fc6e4c16180a79c330ad41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18ba4afaa3fc6e4c16180a79c330ad41">&#9670;&nbsp;</a></span>halStorageGetFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetFree </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>total</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>free</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get free memory (IR &amp; slot storage) </p>
<p>This method returns the number of total and free bytes in current used persistant memory (used for storing IR commands and slot storage).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">total</td><td>Pointer where the number of total possible bytes is stored </td></tr>
    <tr><td class="paramname">free</td><td>Pointer where the number of free bytes is stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if reading is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00180">180</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00757">doGeneralCmdParsing()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph.png" border="0" usemap="#hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph" alt=""/></div>
<map name="hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph" id="hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="184,31,337,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="385,31,504,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="565,5,697,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="552,56,709,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="757,5,836,32"/>
</map>
</div>

</div>
</div>
<a id="ae5e6fcc8c1bdff7f78009830bc78f260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5e6fcc8c1bdff7f78009830bc78f260">&#9670;&nbsp;</a></span>halStorageGetFreeIRCmdSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetFreeIRCmdSlot </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of first available slot for an IR command. </p>
<p>This method returns the number of the first available IR command slot. An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotavailable</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise (no free slot) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00722">722</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01546">halStorageStoreIR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph.png" border="0" usemap="#hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph" alt=""/></div>
<map name="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph" id="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="249,5,379,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph.png" border="0" usemap="#hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph" alt=""/></div>
<map name="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph" id="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="249,31,379,57"/>
<area shape="rect" id="node3" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="427,31,535,57"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="583,31,707,57"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="755,31,873,57"/>
<area shape="rect" id="node6" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="934,5,1066,32"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="921,56,1079,83"/>
<area shape="rect" id="node7" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1127,5,1205,32"/>
</map>
</div>

</div>
</div>
<a id="a2046481d14910cc6a5b0086a796f293b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2046481d14910cc6a5b0086a796f293b">&#9670;&nbsp;</a></span>halStorageGetNameForNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNameForNumber </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of a slot number. </p>
<p>This method returns the name of the given slot number. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Memory to store the slotname to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00766">766</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l01589">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph.png" border="0" usemap="#hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph" alt=""/></div>
<map name="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph" id="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="259,5,388,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph.png" border="0" usemap="#hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph" alt=""/></div>
<map name="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph" id="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="259,56,351,83"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="575,5,729,32"/>
<area shape="rect" id="node8" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="399,81,507,108"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="797,107,916,133"/>
<area shape="rect" id="node5" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="977,81,1109,108"/>
<area shape="rect" id="node7" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="964,132,1121,159"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1169,81,1248,108"/>
<area shape="rect" id="node9" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="587,56,717,83"/>
<area shape="rect" id="node10" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="585,107,719,133"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="593,157,711,184"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="555,208,749,235"/>
</map>
</div>

</div>
</div>
<a id="a53912e9159b29e5fc974a127dbf0982f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53912e9159b29e5fc974a127dbf0982f">&#9670;&nbsp;</a></span>halStorageGetNameForNumberIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNameForNumberIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of an infrared command stored at the given slot number. </p>
<p>This method returns the name of the given slot number for IR commands. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cmdName</td><td>Memory to store the command name to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00554">554</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00597">doInfraredParsing()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph.png" border="0" usemap="#hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph" alt=""/></div>
<map name="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph" id="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="272,5,401,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph.png" border="0" usemap="#hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph" alt=""/></div>
<map name="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph" id="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="272,31,396,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="444,31,563,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="623,5,755,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="611,56,768,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="816,5,895,32"/>
</map>
</div>

</div>
</div>
<a id="aae19bcf97360ccd7af4ddf906ff85141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae19bcf97360ccd7af4ddf906ff85141">&#9670;&nbsp;</a></span>halStorageGetNumberForName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberForName </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of a slotname. </p>
<p>This method returns the number of the given slotname. An invalid name will return ESP_FAIL and a slotnumber of 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Name of the slot to be looked for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00818">818</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00757">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00391">doStorageParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l01212">halStorageLoadName()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph.png" border="0" usemap="#hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph" alt=""/></div>
<map name="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph" id="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="259,5,388,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph.png" border="0" usemap="#hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph" alt=""/></div>
<map name="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph" id="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="259,5,412,32"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="273,56,398,83"/>
<area shape="rect" id="node8" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. " alt="" coords="262,107,409,133"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="469,31,588,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="658,5,790,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="645,56,803,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="851,56,929,83"/>
<area shape="rect" id="node9" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="460,107,597,133"/>
<area shape="rect" id="node10" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="661,107,787,133"/>
</map>
</div>

</div>
</div>
<a id="a531bc39bc2808762298d14b79ac453cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531bc39bc2808762298d14b79ac453cd">&#9670;&nbsp;</a></span>halStorageGetNumberForNameIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberForNameIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of an IR command. </p>
<p>This method returns the number of the given IR command name. An invalid name will return ESP_OK and a slotnumber of 0xFF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cmdName</td><td>Name of the IR command to look for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00894">894</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00597">doInfraredParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l01546">halStorageStoreIR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph.png" border="0" usemap="#hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph" alt=""/></div>
<map name="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph" id="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="272,5,401,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph.png" border="0" usemap="#hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph" alt=""/></div>
<map name="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph" id="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="605,31,729,57"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="272,56,401,83"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="777,31,896,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="957,5,1089,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="944,56,1101,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1149,5,1228,32"/>
<area shape="rect" id="node8" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="449,56,557,83"/>
</map>
</div>

</div>
</div>
<a id="a1495c793604980c76b334f6a6d553c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1495c793604980c76b334f6a6d553c3c">&#9670;&nbsp;</a></span>halStorageGetNumberOfIRCmds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberOfIRCmds </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotsavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of stored IR commands. </p>
<p>This method returns the number of available IR commands. An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotsavailable</td><td>Variable where the slot count will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00679">679</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00597">doInfraredParsing()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph.png" border="0" usemap="#hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph" alt=""/></div>
<map name="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph" id="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="268,5,397,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph.png" border="0" usemap="#hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph" alt=""/></div>
<map name="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph" id="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="268,31,392,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="440,31,559,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="619,5,751,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="607,56,764,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="812,5,891,32"/>
</map>
</div>

</div>
</div>
<a id="a7e0a934f829b47e2445189dd95e962d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e0a934f829b47e2445189dd95e962d6">&#9670;&nbsp;</a></span>halStorageGetNumberOfSlots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberOfSlots </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotsavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of stored slots. </p>
<p>This method returns the number of available slots (the default slot is not counted). An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotsavailable</td><td>Variable where the slot count will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00504">504</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00391">doStorageParsing()</a>, <a class="el" href="hal__storage_8c_source.html#l00987">halStorageLoad()</a>, and <a class="el" href="task__commands_8c_source.html#l01589">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph.png" border="0" usemap="#hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph" alt=""/></div>
<map name="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph" id="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="248,5,377,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph.png" border="0" usemap="#hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph" alt=""/></div>
<map name="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph" id="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="414,6,539,33"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. " alt="" coords="248,177,360,204"/>
<area shape="rect" id="node10" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="258,101,350,128"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="840,152,959,178"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1023,152,1155,178"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1011,202,1168,229"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1216,214,1295,241"/>
<area shape="rect" id="node8" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="408,228,545,254"/>
<area shape="rect" id="node9" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="836,290,963,317"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="614,50,767,77"/>
<area shape="rect" id="node12" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="423,126,531,153"/>
<area shape="rect" id="node13" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="626,101,755,128"/>
<area shape="rect" id="node14" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="623,152,758,178"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="631,202,750,229"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="593,253,788,280"/>
</map>
</div>

</div>
</div>
<a id="a606e5842dd354f1fb4a738ba95c6d5d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a606e5842dd354f1fb4a738ba95c6d5d1">&#9670;&nbsp;</a></span>halStorageInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>internal function to init the filesystem if handle is invalid </p>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00205">205</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01859">halStorageStartTransaction()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph.png" border="0" usemap="#hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph" alt=""/></div>
<map name="hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph" id="hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. " alt="" coords="156,183,336,209"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="384,5,521,32"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="569,80,695,107"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="570,157,694,184"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="763,208,917,235"/>
<area shape="rect" id="node12" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="407,309,499,336"/>
<area shape="rect" id="node18" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="404,157,501,184"/>
<area shape="rect" id="node19" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="399,208,507,235"/>
<area shape="rect" id="node20" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="991,429,1107,456"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="985,183,1112,209"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1365,252,1444,279"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="989,259,1108,285"/>
<area shape="rect" id="node8" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1173,252,1305,279"/>
<area shape="rect" id="node9" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1160,303,1317,329"/>
<area shape="rect" id="node13" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="578,360,686,387"/>
<area shape="rect" id="node14" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="775,259,905,285"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="773,309,907,336"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="781,360,899,387"/>
<area shape="rect" id="node17" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="743,411,937,437"/>
</map>
</div>

</div>
</div>
<a id="aad5b764e7c611ff24dbcdd872dc9ae76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad5b764e7c611ff24dbcdd872dc9ae76">&#9670;&nbsp;</a></span>halStorageLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a>&#160;</td>
          <td class="paramname"><em>navigate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by an action. </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the navigate parameter, using next/prev/default</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data.</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">navigate</td><td>Action defining the next loaded slot (default or prev/next) </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00987">987</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00280">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph.png" border="0" usemap="#hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph" alt=""/></div>
<map name="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph" id="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6" title="Get the number of stored slots. " alt="" coords="372,5,567,32"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422" title="Load a slot by a slot number (starting with 1, 0 is default slot) " alt="" coords="165,56,324,83"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="861,107,991,133"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="387,132,552,159"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="657,157,771,184"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. " alt="" coords="615,208,813,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph.png" border="0" usemap="#hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph" alt=""/></div>
<map name="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph" id="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="165,5,303,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="351,5,477,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="525,5,604,32"/>
</map>
</div>

</div>
</div>
<a id="abc699ff3996d12d3e6bcc9e372b277e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc699ff3996d12d3e6bcc9e372b277e0">&#9670;&nbsp;</a></span>halStorageLoadGetVBConfigs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadGetVBConfigs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>vb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vb_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>vb_config_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load one virtual button config for currently loaded slot. </p>
<p>This function is used to load one virtual button config after the slot was loaded (either by name, number or action).</p>
<p>Please use the same transaction id as for loading the slot. It is not possible to use the same tid after halStorageFinishTransaction was called.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. ">halStorageLoad</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. ">halStorageLoadName</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422" title="Load a slot by a slot number (starting with 1, 0 is default slot) ">halStorageLoadNumber</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vb</td><td>Number of virtual button config to be loaded </td></tr>
    <tr><td class="paramname">vb_config</td><td>Pointer to config struct which holds the VB config data </td></tr>
    <tr><td class="paramname">vb_config_size</td><td>Size of config which will be loaded (differs between types of VB actions). </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (no config found or no slot loaded) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01332">1332</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00280">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph.png" border="0" usemap="#hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph" alt=""/></div>
<map name="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph" id="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="249,5,379,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph.png" border="0" usemap="#hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph" alt=""/></div>
<map name="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph" id="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="249,5,387,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="435,5,561,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="609,5,688,32"/>
</map>
</div>

</div>
</div>
<a id="aa728fac6a17066ecb910c19338ae5288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa728fac6a17066ecb910c19338ae5288">&#9670;&nbsp;</a></span>halStorageLoadIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadIR </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load an IR command by name. </p>
<p>This method loads an IR command from storage. The slot is defined by the slot name.</p>
<p>To start loading a command, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access. Finally, if the command is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdName</td><td>Name of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot name not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01747">1747</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__infrared_8c_source.html#l00051">task_infrared()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph.png" border="0" usemap="#hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph" alt=""/></div>
<map name="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph" id="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="180,5,309,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph.png" border="0" usemap="#hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph" alt=""/></div>
<map name="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph" id="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph">
<area shape="rect" id="node2" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="180,31,277,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="325,31,449,57"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="497,31,616,57"/>
<area shape="rect" id="node5" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="677,5,809,32"/>
<area shape="rect" id="node7" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="664,56,821,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="869,5,948,32"/>
</map>
</div>

</div>
</div>
<a id="a75596c64adaa2b8d9104530acc94b094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75596c64adaa2b8d9104530acc94b094">&#9670;&nbsp;</a></span>halStorageLoadName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by a slot name. </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slot name.</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotname</td><td>Name of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot name not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01212">1212</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00280">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph.png" border="0" usemap="#hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph" alt=""/></div>
<map name="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph" id="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="407,5,612,32"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422" title="Load a slot by a slot number (starting with 1, 0 is default slot) " alt="" coords="200,56,359,83"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="907,107,1036,133"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="427,132,592,159"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="702,157,817,184"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. " alt="" coords="660,208,859,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph.png" border="0" usemap="#hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph" alt=""/></div>
<map name="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph" id="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="200,5,337,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="385,5,512,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="560,5,639,32"/>
</map>
</div>

</div>
</div>
<a id="a3b1b266074bd493fe43dcf980852a422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1b266074bd493fe43dcf980852a422">&#9670;&nbsp;</a></span>halStorageLoadNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadNumber </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by a slot number (starting with 1, 0 is default slot) </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slotnumber, starting with 1. If you load the slot number 0, the default slot is loaded</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnumber</td><td>Number of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot number not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01069">1069</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00987">halStorageLoad()</a>, and <a class="el" href="hal__storage_8c_source.html#l01212">halStorageLoadName()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph.png" border="0" usemap="#hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph" alt=""/></div>
<map name="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph" id="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="672,31,801,57"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="212,31,377,57"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="467,56,582,83"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. " alt="" coords="425,107,624,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph.png" border="0" usemap="#hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph" alt=""/></div>
<map name="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph" id="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. " alt="" coords="229,5,341,32"/>
<area shape="rect" id="node6" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. " alt="" coords="212,56,359,83"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="407,31,544,57"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="592,31,719,57"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="767,31,845,57"/>
</map>
</div>

</div>
</div>
<a id="a63ec8e05a2bb4c214600e94b8ab05eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63ec8e05a2bb4c214600e94b8ab05eea">&#9670;&nbsp;</a></span>halStorageNVSLoadString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageNVSLoadString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a string from NVS (global, no slot assignment) </p>
<p>This method is used to load a string from a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value, same as used on store </td></tr>
    <tr><td class="paramname">string</td><td>Buffer for string to be read from flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Provide sufficient buffer length, otherwise a CPU exception will happen! </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_get_str </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00113">113</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00482">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph.png" border="0" usemap="#hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph" alt=""/></div>
<map name="hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph" id="hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph">
<area shape="rect" id="node2" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="228,5,344,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="392,5,471,32"/>
</map>
</div>

</div>
</div>
<a id="aa545d76c7dcaafc129a03dfd9706ca7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa545d76c7dcaafc129a03dfd9706ca7b">&#9670;&nbsp;</a></span>halStorageNVSStoreString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageNVSStoreString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a string into NVS (global, no slot assignment) </p>
<p>This method is used to store a string in a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="section warning"><dt>Warning</dt><dd>NVS is not as big as FAT storage, use with care! (max ~10kB) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value on read. </td></tr>
    <tr><td class="paramname">string</td><td>String to be stored in flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_set_str </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00145">145</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00757">doGeneralCmdParsing()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph.png" border="0" usemap="#hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph" alt=""/></div>
<map name="hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph" id="hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="231,31,384,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="432,31,551,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="611,5,743,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="599,56,756,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="804,5,883,32"/>
</map>
</div>

</div>
</div>
<a id="aead99606f84645b2bb6ae000461bf819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead99606f84645b2bb6ae000461bf819">&#9670;&nbsp;</a></span>halStorageStartTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStartTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>tickstowait</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a storage transaction. </p>
<p>This method is used to start a transaction and needs to be called BEFORE any further storage access. If this function is successful (within the given ticks, the storage is getting free), a transaction ID is written, which should be used in further storage access.</p>
<p>After finishing, a transaction is terminated by halStorageFinishTransaction.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction if this command was successful, 0 if not. </td></tr>
    <tr><td class="paramname">tickstowait</td><td>Maximum amount of ticks to wait for this command to be successful </td></tr>
    <tr><td class="paramname">caller</td><td>Name of calling task, used to track storage access </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is valid, ESP_FAIL if other tasks did not freed the access in time </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01859">1859</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00280">configSwitcherTask()</a>, <a class="el" href="task__commands_8c_source.html#l00757">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00597">doInfraredParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00391">doStorageParsing()</a>, <a class="el" href="task__infrared_8c_source.html#l00153">infrared_record()</a>, <a class="el" href="task__commands_8c_source.html#l01589">printAllSlots()</a>, <a class="el" href="task__infrared_8c_source.html#l00051">task_infrared()</a>, and <a class="el" href="task__webgui_8c_source.html#l00482">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph.png" border="0" usemap="#hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph" alt=""/></div>
<map name="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph" id="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1" title="internal function to init the filesystem if handle is invalid " alt="" coords="233,5,336,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph.png" border="0" usemap="#hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph" alt=""/></div>
<map name="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph" id="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="233,80,371,107"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="613,232,766,259"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="419,182,543,208"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="419,460,544,487"/>
<area shape="rect" id="node11" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="248,232,356,259"/>
<area shape="rect" id="node12" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="256,334,348,360"/>
<area shape="rect" id="node18" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="253,131,351,158"/>
<area shape="rect" id="node19" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="840,30,956,56"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="835,80,961,107"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1215,80,1293,107"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="839,308,957,335"/>
<area shape="rect" id="node7" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1022,308,1154,335"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1009,258,1167,284"/>
<area shape="rect" id="node13" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="427,384,535,411"/>
<area shape="rect" id="node14" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="625,283,754,310"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="622,334,757,360"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="630,384,749,411"/>
<area shape="rect" id="node17" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="592,435,787,462"/>
</map>
</div>

</div>
</div>
<a id="aadf9ff06990d0f0af2eea2e6f2b8082a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadf9ff06990d0f0af2eea2e6f2b8082a">&#9670;&nbsp;</a></span>halStorageStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStore </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a generalConfig_t struct. </p>
<p>This method stores the general config for the given slotnumber. A slot contains: <br />
 -) General Config -) Slotname -) Slotnumber (used for the filename) -) MD5 sum (to check for corrupted content)</p>
<p>If there is already a slot with this given number, it is overwritten!</p>
<p>!! All following halStorageStoreSetVBConfigs (except the parameter slotnumber is used there) are using this slotnumber until halStorageFinishTransaction is called !!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to general config, can be freed after this call </td></tr>
    <tr><td class="paramname">slotname</td><td>Name of this slot </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number where to store this slot </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. ">halStorageStoreSetVBConfigs</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01449">1449</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00391">doStorageParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l00263">halStorageCreateDefault()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph.png" border="0" usemap="#hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph" alt=""/></div>
<map name="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph" id="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="168,5,297,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph.png" border="0" usemap="#hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph" alt=""/></div>
<map name="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph" id="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="188,44,313,71"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="168,145,333,172"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1029,183,1148,209"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1213,183,1345,209"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1200,233,1357,260"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1405,245,1484,272"/>
<area shape="rect" id="node8" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="415,145,507,172"/>
<area shape="rect" id="node15" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="Load a slot by a slot number (starting with 1, 0 is default slot) " alt="" coords="381,284,540,311"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="803,81,957,108"/>
<area shape="rect" id="node10" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="607,171,715,197"/>
<area shape="rect" id="node11" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="815,132,945,159"/>
<area shape="rect" id="node12" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="813,183,947,209"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="821,233,939,260"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="783,284,977,311"/>
<area shape="rect" id="node16" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. " alt="" coords="605,284,717,311"/>
<area shape="rect" id="node19" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. " alt="" coords="588,335,735,361"/>
<area shape="rect" id="node17" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="811,335,949,361"/>
<area shape="rect" id="node18" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1025,321,1152,348"/>
</map>
</div>

</div>
</div>
<a id="ace0ac79b0e2b273d97e5b806de9eb493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0ac79b0e2b273d97e5b806de9eb493">&#9670;&nbsp;</a></span>halStorageStoreIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStoreIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store an infrared command to storage. </p>
<p>This method stores a set of IR edges with a given length and a given command name. If there is already a cmd with this given name, it is overwritten!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a IR config, can be freed after this call </td></tr>
    <tr><td class="paramname">cmdName</td><td>Name of this IR command </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16" title="Output buzzer noise. ">halIOIR_t</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#aa728fac6a17066ecb910c19338ae5288" title="Load an IR command by name. ">halStorageLoadIR</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01546">1546</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__infrared_8c_source.html#l00153">infrared_record()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph.png" border="0" usemap="#hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph" alt=""/></div>
<map name="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph" id="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="449,25,579,52"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a531bc39bc2808762298d14b79ac453cd" title="Get the number of an IR command. " alt="" coords="183,25,401,52"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260" title="Get the number of first available slot for an IR command. " alt="" coords="194,76,390,103"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph.png" border="0" usemap="#hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph" alt=""/></div>
<map name="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph" id="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph">
<area shape="rect" id="node2" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="183,31,291,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a937cdeb2f02b0c5d9a0f94a0f69e9328" title="doInfraredParsing" alt="" coords="339,31,463,57"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="511,31,629,57"/>
<area shape="rect" id="node5" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="690,5,822,32"/>
<area shape="rect" id="node7" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="677,56,835,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="883,5,961,32"/>
</map>
</div>

</div>
</div>
<a id="a046daab088cb37e318c07c2728ade9d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a046daab088cb37e318c07c2728ade9d3">&#9670;&nbsp;</a></span>halStorageStoreSetVBConfigs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStoreSetVBConfigs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a virtual button config struct. </p>
<p>This method stores the config structs for virtual buttons.</p>
<p>Configs are provided via <a class="el" href="structgeneralConfig.html">generalConfig</a> struct, which contains necessary information:</p><ul>
<li>Size of config</li>
<li>Pointer to current config</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of the slot on which this config is used. Use 0xFF to ignore and use previous set slot number (by halStorageStore) </td></tr>
    <tr><td class="paramname">config</td><td>Pointer to the general config struct (containing pointers/size to VB cfg) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. ">halStorageStore</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#ac4672e8f194fe72f4c3f9c4440a907ea" title="Header for a VB config in FAT file. ">storageHeader_t</a> </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>size element of generalConfig_t MUST be set to have a successful write. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This method always overwrites an existing config! </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01642">1642</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00391">doStorageParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l00263">halStorageCreateDefault()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_cgraph.png" border="0" usemap="#hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_cgraph" alt=""/></div>
<map name="hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_cgraph" id="hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="252,5,381,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_icgraph.png" border="0" usemap="#hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_icgraph" alt=""/></div>
<map name="hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_icgraph" id="hal__storage_8c_a046daab088cb37e318c07c2728ade9d3_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="272,44,397,71"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="252,145,417,172"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1113,183,1232,209"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1297,183,1429,209"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1284,233,1441,260"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1489,245,1568,272"/>
<area shape="rect" id="node8" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="499,145,591,172"/>
<area shape="rect" id="node15" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="Load a slot by a slot number (starting with 1, 0 is default slot) " alt="" coords="465,284,624,311"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="887,81,1041,108"/>
<area shape="rect" id="node10" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="691,171,799,197"/>
<area shape="rect" id="node11" href="task__commands_8c.html#afc7ebe31a124c2102f8b41577b6dc5b0" title="doJoystickParsing" alt="" coords="899,132,1029,159"/>
<area shape="rect" id="node12" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="897,183,1031,209"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="905,233,1023,260"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="867,284,1061,311"/>
<area shape="rect" id="node16" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. " alt="" coords="689,284,801,311"/>
<area shape="rect" id="node19" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. " alt="" coords="672,335,819,361"/>
<area shape="rect" id="node17" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="895,335,1033,361"/>
<area shape="rect" id="node18" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1109,321,1236,348"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a47050fc742d4864291d317dc39914ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47050fc742d4864291d317dc39914ad1">&#9670;&nbsp;</a></span>base_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* base_path = &quot;/spiflash&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Partition name (used to define different memory types) </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00093">93</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00610">halStorageDeleteIRCmd()</a>, <a class="el" href="hal__storage_8c_source.html#l01234">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00722">halStorageGetFreeIRCmdSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00766">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00554">halStorageGetNameForNumberIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00818">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00894">halStorageGetNumberForNameIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00679">halStorageGetNumberOfIRCmds()</a>, <a class="el" href="hal__storage_8c_source.html#l00504">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l00205">halStorageInit()</a>, <a class="el" href="hal__storage_8c_source.html#l01332">halStorageLoadGetVBConfigs()</a>, <a class="el" href="hal__storage_8c_source.html#l01747">halStorageLoadIR()</a>, <a class="el" href="hal__storage_8c_source.html#l01069">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01449">halStorageStore()</a>, <a class="el" href="hal__storage_8c_source.html#l01546">halStorageStoreIR()</a>, and <a class="el" href="hal__storage_8c_source.html#l01642">halStorageStoreSetVBConfigs()</a>.</p>

</div>
</div>
<a id="afe54e8f771b85765a57fb799302f2a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe54e8f771b85765a57fb799302f2a09">&#9670;&nbsp;</a></span>halStorageMutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SemaphoreHandle_t halStorageMutex = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mutex which is used to avoid multiple access to different loaded slots. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1" title="Currently active transaction ID, 0 is invalid. ">storageCurrentTID</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00077">77</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01915">halStorageFinishTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l01859">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="a9d1f6636715d2cd2af21e20bc5e26afa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d1f6636715d2cd2af21e20bc5e26afa">&#9670;&nbsp;</a></span>s_wl_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">wl_handle_t s_wl_handle = WL_INVALID_HANDLE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wear levelling handle. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00090">90</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00235">halStorageChecks()</a>, <a class="el" href="hal__storage_8c_source.html#l00205">halStorageInit()</a>, and <a class="el" href="hal__storage_8c_source.html#l01859">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="a5c097404b5dfa34bdac65865586dac5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c097404b5dfa34bdac65865586dac5a">&#9670;&nbsp;</a></span>storageCurrentSlotNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t storageCurrentSlotNumber = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently activated slot number. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00081">81</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00487">halStorageGetCurrentSlotNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00987">halStorageLoad()</a>, <a class="el" href="hal__storage_8c_source.html#l01332">halStorageLoadGetVBConfigs()</a>, <a class="el" href="hal__storage_8c_source.html#l01069">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01449">halStorageStore()</a>, and <a class="el" href="hal__storage_8c_source.html#l01642">halStorageStoreSetVBConfigs()</a>.</p>

</div>
</div>
<a id="ab7bc6f83a4f91dba2d5b3d1edeedf4b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7bc6f83a4f91dba2d5b3d1edeedf4b1">&#9670;&nbsp;</a></span>storageCurrentTID</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t storageCurrentTID = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently active transaction ID, 0 is invalid. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00079">79</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00235">halStorageChecks()</a>, <a class="el" href="hal__storage_8c_source.html#l01915">halStorageFinishTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l01859">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="a687cf5b473fc94d8fafca390fcc11a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687cf5b473fc94d8fafca390fcc11a1f">&#9670;&nbsp;</a></span>storageCurrentTIDHolder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char storageCurrentTIDHolder[32]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current active storage task. </p>
<p>This string is used to determine the currently active task, which holds a tid. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1" title="Currently active transaction ID, 0 is invalid. ">storageCurrentTID</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00101">101</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01859">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="ab5f3387fe559c96c7523a59e28b0a74b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5f3387fe559c96c7523a59e28b0a74b">&#9670;&nbsp;</a></span>storageCurrentVBNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t storageCurrentVBNumber = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently used VB number. </p>
<p>This number is used for halStorageStoreSetVBConfigs only.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. ">halStorageStoreSetVBConfigs</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00087">87</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01859">halStorageStartTransaction()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
