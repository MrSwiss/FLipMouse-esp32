<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/hal/hal_storage.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_2c1795b0295572423fca70fe6201093a.html">hal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hal_storage.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>&quot;</code><br />
</div>
<p><a href="hal__storage_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;hal_storage&quot;</td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1">halStorageInit</a> (void)</td></tr>
<tr class="memdesc:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">internal function to init the filesystem if handle is invalid  <a href="#a606e5842dd354f1fb4a738ba95c6d5d1">More...</a><br /></td></tr>
<tr class="separator:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6566ef5b69c85d422df52435c95d36"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36">halStorageChecks</a> (uint32_t tid)</td></tr>
<tr class="memdesc:a4b6566ef5b69c85d422df52435c95d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helper to check for a valid WL handle and the correct tid.  <a href="#a4b6566ef5b69c85d422df52435c95d36">More...</a><br /></td></tr>
<tr class="separator:a4b6566ef5b69c85d422df52435c95d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba">halStorageCreateDefault</a> (uint32_t tid)</td></tr>
<tr class="memdesc:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new default slot.  <a href="#aed4beb2e1bd8cd78a201fbcb49958cba">More...</a><br /></td></tr>
<tr class="separator:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0a934f829b47e2445189dd95e962d6"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6">halStorageGetNumberOfSlots</a> (uint32_t tid, uint8_t *slotsavailable)</td></tr>
<tr class="separator:a7e0a934f829b47e2445189dd95e962d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2046481d14910cc6a5b0086a796f293b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b">halStorageGetNameForNumber</a> (uint32_t tid, uint8_t slotnumber, char *slotname)</td></tr>
<tr class="separator:a2046481d14910cc6a5b0086a796f293b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae19bcf97360ccd7af4ddf906ff85141"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141">halStorageGetNumberForName</a> (uint32_t tid, uint8_t *slotnumber, char *slotname)</td></tr>
<tr class="separator:aae19bcf97360ccd7af4ddf906ff85141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5b764e7c611ff24dbcdd872dc9ae76"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aad5b764e7c611ff24dbcdd872dc9ae76">halStorageLoad</a> (<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> navigate, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="separator:aad5b764e7c611ff24dbcdd872dc9ae76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1b266074bd493fe43dcf980852a422"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422">halStorageLoadNumber</a> (uint8_t slotnumber, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="separator:a3b1b266074bd493fe43dcf980852a422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75596c64adaa2b8d9104530acc94b094"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a75596c64adaa2b8d9104530acc94b094">halStorageLoadName</a> (char *slotname, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="separator:a75596c64adaa2b8d9104530acc94b094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe9e276fd05e50e4ab9d554ef6f58ca"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a5fe9e276fd05e50e4ab9d554ef6f58ca">halStorageDeleteSlot</a> (uint8_t slotnr, uint32_t tid)</td></tr>
<tr class="memdesc:a5fe9e276fd05e50e4ab9d554ef6f58ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one or all slots.  <a href="#a5fe9e276fd05e50e4ab9d554ef6f58ca">More...</a><br /></td></tr>
<tr class="separator:a5fe9e276fd05e50e4ab9d554ef6f58ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc699ff3996d12d3e6bcc9e372b277e0"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0">halStorageLoadGetVBConfigs</a> (uint8_t vb, void *vb_config, size_t vb_config_size, uint32_t tid)</td></tr>
<tr class="memdesc:abc699ff3996d12d3e6bcc9e372b277e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load one virtual button config for currently loaded slot.  <a href="#abc699ff3996d12d3e6bcc9e372b277e0">More...</a><br /></td></tr>
<tr class="separator:abc699ff3996d12d3e6bcc9e372b277e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadf9ff06990d0f0af2eea2e6f2b8082a"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a">halStorageStore</a> (uint32_t tid, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *cfg, char *slotname, uint8_t slotnumber)</td></tr>
<tr class="memdesc:aadf9ff06990d0f0af2eea2e6f2b8082a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a generalConfig_t struct.  <a href="#aadf9ff06990d0f0af2eea2e6f2b8082a">More...</a><br /></td></tr>
<tr class="separator:aadf9ff06990d0f0af2eea2e6f2b8082a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1503debb336ea2d708e4e0884c7aa6a3"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a1503debb336ea2d708e4e0884c7aa6a3">halStorageStoreSetVBConfigs</a> (uint8_t slotnumber, uint8_t vb, void *config, size_t configsize, uint32_t tid)</td></tr>
<tr class="memdesc:a1503debb336ea2d708e4e0884c7aa6a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a virtual button config struct.  <a href="#a1503debb336ea2d708e4e0884c7aa6a3">More...</a><br /></td></tr>
<tr class="separator:a1503debb336ea2d708e4e0884c7aa6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac67aaf5a3af4140bff3d7c134b9d771f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> (uint32_t *tid, TickType_t tickstowait)</td></tr>
<tr class="separator:ac67aaf5a3af4140bff3d7c134b9d771f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> (uint32_t tid)</td></tr>
<tr class="separator:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe54e8f771b85765a57fb799302f2a09"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#afe54e8f771b85765a57fb799302f2a09">halStorageMutex</a> = NULL</td></tr>
<tr class="memdesc:afe54e8f771b85765a57fb799302f2a09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex which is used to avoid multiple access to different loaded slots.  <a href="#afe54e8f771b85765a57fb799302f2a09">More...</a><br /></td></tr>
<tr class="separator:afe54e8f771b85765a57fb799302f2a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47050fc742d4864291d317dc39914ad1"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a47050fc742d4864291d317dc39914ad1">base_path</a> = &quot;/spiflash&quot;</td></tr>
<tr class="memdesc:a47050fc742d4864291d317dc39914ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition name (used to define different memory types)  <a href="#a47050fc742d4864291d317dc39914ad1">More...</a><br /></td></tr>
<tr class="separator:a47050fc742d4864291d317dc39914ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs. </p>
<p>This module stores general configs &amp; virtual button configurations to a storage area. In case of the ESP32 we use FAT with wear leveling, which is provided by the esp-idf. <b>Warning:</b> Please adjust the esp-idf to us 512Byte sectors and <b>mode "safety"</b>! We don't do any safe copying, just building a checksum to detect faulty slots.</p>
<p>This module can be used to store a config struct (generalConfig_t) and the corresponding virtual button config structs to the storage.</p>
<p>Following commands are implemented here:</p><ul>
<li>list all slot names</li>
<li>load default slot</li>
<li>load next or previous slot</li>
<li>load slot by name or number</li>
<li>store a given slot</li>
<li>delete one slot</li>
<li>delete all slots</li>
</ul>
<p>This module starts one task on its own for maintaining the storage access. All methods called from this module will block via a semaphore until the requested operation is finished.</p>
<p>Slots are stored in following naming convention (8.3 rule applies here): general slot config: xxx.fms (slot number, e.g., 001.fms for slot 1) virtual button config for slot xxx xxx_VB.fms</p>
<dl class="section note"><dt>Note</dt><dd>Maximum number of slots: 250! (e.g. 250.fms) </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Adjust the esp-idf (via "make menuconfig") to use 512B sectors and mode <b>safety</b>!</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;hal_storage&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00063">63</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00132">halStorageCreateDefault()</a>, <a class="el" href="hal__storage_8c_source.html#l00775">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l01128">halStorageFinishTransaction()</a>, <a class="el" href="hal__storage_8c_source.html#l00408">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00460">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00359">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l00088">halStorageInit()</a>, <a class="el" href="hal__storage_8c_source.html#l00548">halStorageLoad()</a>, <a class="el" href="hal__storage_8c_source.html#l00824">halStorageLoadGetVBConfigs()</a>, <a class="el" href="hal__storage_8c_source.html#l00754">halStorageLoadName()</a>, <a class="el" href="hal__storage_8c_source.html#l00618">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01075">halStorageStartTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l00889">halStorageStore()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4b6566ef5b69c85d422df52435c95d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6566ef5b69c85d422df52435c95d36">&#9670;&nbsp;</a></span>halStorageChecks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageChecks </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal helper to check for a valid WL handle and the correct tid. </p>
<dl class="section see"><dt>See also</dt><dd>storageCurrentTID </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Currently used TID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if all checks are valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00104">104</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00132">halStorageCreateDefault()</a>, <a class="el" href="hal__storage_8c_source.html#l00775">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00408">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00460">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00359">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l00824">halStorageLoadGetVBConfigs()</a>, <a class="el" href="hal__storage_8c_source.html#l00618">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00889">halStorageStore()</a>, and <a class="el" href="hal__storage_8c_source.html#l00990">halStorageStoreSetVBConfigs()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph.png" border="0" usemap="#hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph" alt=""/></div>
<map name="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph" id="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="451,129,617,156"/>
<area shape="rect" id="node6" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="halStorageLoadNumber" alt="" coords="703,28,862,54"/>
<area shape="rect" id="node8" href="hal__storage_8h.html#a5fe9e276fd05e50e4ab9d554ef6f58ca" title="Delete one or all slots. " alt="" coords="710,269,855,296"/>
<area shape="rect" id="node10" href="hal__storage_8h.html#a2046481d14910cc6a5b0086a796f293b" title="halStorageGetNameForNumber" alt="" coords="183,357,388,384"/>
<area shape="rect" id="node16" href="hal__storage_8h.html#aae19bcf97360ccd7af4ddf906ff85141" title="halStorageGetNumberForName" alt="" coords="680,78,885,105"/>
<area shape="rect" id="node17" href="hal__storage_8h.html#a7e0a934f829b47e2445189dd95e962d6" title="halStorageGetNumberOfSlots" alt="" coords="188,256,383,282"/>
<area shape="rect" id="node20" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. " alt="" coords="436,458,632,485"/>
<area shape="rect" id="node21" href="hal__storage_8h.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="228,154,343,181"/>
<area shape="rect" id="node22" href="hal__storage_8h.html#a1503debb336ea2d708e4e0884c7aa6a3" title="Store a virtual button config struct. " alt="" coords="186,205,385,232"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="1176,180,1313,206"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1361,180,1488,206"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1536,180,1615,206"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="halStorageLoadName" alt="" coords="957,78,1104,105"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="954,281,1107,308"/>
<area shape="rect" id="node11" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="488,357,580,384"/>
<area shape="rect" id="node12" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="729,370,837,397"/>
<area shape="rect" id="node13" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="963,332,1098,358"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="971,382,1090,409"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="933,433,1128,460"/>
<area shape="rect" id="node18" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="471,205,597,232"/>
<area shape="rect" id="node19" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="halStorageLoad" alt="" coords="478,256,590,282"/>
</map>
</div>

</div>
</div>
<a id="aed4beb2e1bd8cd78a201fbcb49958cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4beb2e1bd8cd78a201fbcb49958cba">&#9670;&nbsp;</a></span>halStorageCreateDefault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halStorageCreateDefault </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new default slot. </p>
<p>Create a new default slot in memory. The default settings are hardcoded here to provide a fallback solution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Valid transaction ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>Change this default slot to usable settings </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00132">132</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00205">configSwitcherTask()</a>, and <a class="el" href="hal__storage_8c_source.html#l00618">halStorageLoadNumber()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph.png" border="0" usemap="#hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" alt=""/></div>
<map name="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" id="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="465,24,595,51"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="261,24,375,51"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a1503debb336ea2d708e4e0884c7aa6a3" title="Store a virtual button config struct. " alt="" coords="219,75,417,102"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph.png" border="0" usemap="#hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" alt=""/></div>
<map name="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" id="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="620,5,757,32"/>
<area shape="rect" id="node5" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="halStorageLoadNumber" alt="" coords="219,31,377,57"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="805,5,932,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="980,5,1059,32"/>
<area shape="rect" id="node6" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="halStorageLoadName" alt="" coords="425,31,572,57"/>
</map>
</div>

</div>
</div>
<a id="a5fe9e276fd05e50e4ab9d554ef6f58ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fe9e276fd05e50e4ab9d554ef6f58ca">&#9670;&nbsp;</a></span>halStorageDeleteSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageDeleteSlot </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one or all slots. </p>
<p>This function is used to delete one slot or all slots (depending on parameter slotnumber)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use 0 to delete all slots </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00775">775</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00205">configSwitcherTask()</a>, and <a class="el" href="task__commands_8c_source.html#l00457">doGeneralCmdParsing()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_cgraph.png" border="0" usemap="#hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_cgraph" alt=""/></div>
<map name="hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_cgraph" id="hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="199,5,328,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_icgraph.png" border="0" usemap="#hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_icgraph" alt=""/></div>
<map name="hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_icgraph" id="hal__storage_8c_a5fe9e276fd05e50e4ab9d554ef6f58ca_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="207,5,344,32"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="199,56,352,83"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="400,5,527,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="575,5,653,32"/>
</map>
</div>

</div>
</div>
<a id="a00b5db14e24d7ada8a42aa6b3f1a1cb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b5db14e24d7ada8a42aa6b3f1a1cb7">&#9670;&nbsp;</a></span>halStorageFinishTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageFinishTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finish a storage transaction</p>
<p>This method is used to stop a transaction and needs to be called AFTER storage access, enabling other tasks to acquire the storage module.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction to be finished </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is freed, ESP_FAIL if the tid is not valid </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01128">1128</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00205">configSwitcherTask()</a>, <a class="el" href="task__commands_8c_source.html#l00457">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00354">doStorageParsing()</a>, and <a class="el" href="task__commands_8c_source.html#l01138">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph.png" border="0" usemap="#hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" alt=""/></div>
<map name="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" id="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="240,5,377,32"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="621,81,774,108"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="246,107,371,133"/>
<area shape="rect" id="node7" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="263,157,355,184"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="425,5,552,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="658,5,737,32"/>
<area shape="rect" id="node8" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="435,157,543,184"/>
<area shape="rect" id="node9" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="630,132,765,159"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="638,183,757,209"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="600,233,795,260"/>
</map>
</div>

</div>
</div>
<a id="a2046481d14910cc6a5b0086a796f293b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2046481d14910cc6a5b0086a796f293b">&#9670;&nbsp;</a></span>halStorageGetNameForNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNameForNumber </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the name of a slot number</p>
<p>This method returns the name of the given slot number. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Memory to store the slotname to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00408">408</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l01138">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph.png" border="0" usemap="#hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph" alt=""/></div>
<map name="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph" id="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="259,5,388,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph.png" border="0" usemap="#hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph" alt=""/></div>
<map name="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph" id="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="259,31,351,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="575,5,729,32"/>
<area shape="rect" id="node4" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="399,56,507,83"/>
<area shape="rect" id="node5" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="585,56,719,83"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="593,107,711,133"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="555,157,749,184"/>
</map>
</div>

</div>
</div>
<a id="aae19bcf97360ccd7af4ddf906ff85141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae19bcf97360ccd7af4ddf906ff85141">&#9670;&nbsp;</a></span>halStorageGetNumberForName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberForName </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the number of a slotname</p>
<p>This method returns the number of the given slotname. An invalid name will return ESP_FAIL and a slotnumber of 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Name of the slot to be looked for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00460">460</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00457">doGeneralCmdParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l00754">halStorageLoadName()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph.png" border="0" usemap="#hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph" alt=""/></div>
<map name="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph" id="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="259,5,388,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph.png" border="0" usemap="#hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph" alt=""/></div>
<map name="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph" id="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="259,5,412,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="halStorageLoadName" alt="" coords="262,56,409,83"/>
<area shape="rect" id="node4" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="460,56,597,83"/>
<area shape="rect" id="node5" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="645,56,772,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="820,56,899,83"/>
</map>
</div>

</div>
</div>
<a id="a7e0a934f829b47e2445189dd95e962d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e0a934f829b47e2445189dd95e962d6">&#9670;&nbsp;</a></span>halStorageGetNumberOfSlots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberOfSlots </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotsavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the number of stored slots</p>
<p>This method returns the number of available slots (the default slot is not counted). An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotsavailable</td><td>Variable where the slot count will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00359">359</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00354">doStorageParsing()</a>, <a class="el" href="hal__storage_8c_source.html#l00548">halStorageLoad()</a>, and <a class="el" href="task__commands_8c_source.html#l01138">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph.png" border="0" usemap="#hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph" alt=""/></div>
<map name="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph" id="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="248,5,377,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph.png" border="0" usemap="#hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph" alt=""/></div>
<map name="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph" id="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="248,5,373,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="halStorageLoad" alt="" coords="255,56,367,83"/>
<area shape="rect" id="node7" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="265,107,357,133"/>
<area shape="rect" id="node4" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="421,56,559,83"/>
<area shape="rect" id="node5" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="641,56,767,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="849,56,928,83"/>
<area shape="rect" id="node8" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="627,107,781,133"/>
<area shape="rect" id="node9" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="436,157,544,184"/>
<area shape="rect" id="node10" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="637,157,771,184"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="645,208,763,235"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="607,259,801,285"/>
</map>
</div>

</div>
</div>
<a id="a606e5842dd354f1fb4a738ba95c6d5d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a606e5842dd354f1fb4a738ba95c6d5d1">&#9670;&nbsp;</a></span>halStorageInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>internal function to init the filesystem if handle is invalid </p>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00088">88</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

</div>
</div>
<a id="aad5b764e7c611ff24dbcdd872dc9ae76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad5b764e7c611ff24dbcdd872dc9ae76">&#9670;&nbsp;</a></span>halStorageLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a>&#160;</td>
          <td class="paramname"><em>navigate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>load a slot by an action</p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the navigate parameter, using next/prev/default</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data.</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">navigate</td><td>Action defining the next loaded slot (default or prev/next) </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00548">548</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00205">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph.png" border="0" usemap="#hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph" alt=""/></div>
<map name="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph" id="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6" title="halStorageGetNumberOfSlots" alt="" coords="165,5,360,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="408,5,537,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph.png" border="0" usemap="#hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph" alt=""/></div>
<map name="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph" id="hal__storage_8c_aad5b764e7c611ff24dbcdd872dc9ae76_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="165,5,303,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="351,5,477,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="525,5,604,32"/>
</map>
</div>

</div>
</div>
<a id="abc699ff3996d12d3e6bcc9e372b277e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc699ff3996d12d3e6bcc9e372b277e0">&#9670;&nbsp;</a></span>halStorageLoadGetVBConfigs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadGetVBConfigs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>vb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vb_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>vb_config_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load one virtual button config for currently loaded slot. </p>
<p>This function is used to load one virtual button config after the slot was loaded (either by name, number or action).</p>
<p>Please use the same transaction id as for loading the slot. It is not possible to use the same tid after halStorageFinishTransaction was called.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aad5b764e7c611ff24dbcdd872dc9ae76">halStorageLoad</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a75596c64adaa2b8d9104530acc94b094">halStorageLoadName</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422">halStorageLoadNumber</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vb</td><td>Number of virtual button config to be loaded </td></tr>
    <tr><td class="paramname">vb_config</td><td>Pointer to config struct which holds the VB config data </td></tr>
    <tr><td class="paramname">vb_config_size</td><td>Size of config which will be loaded (differs between functions) </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (no config found or no slot loaded) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00824">824</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00205">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph.png" border="0" usemap="#hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph" alt=""/></div>
<map name="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph" id="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="249,5,379,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph.png" border="0" usemap="#hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph" alt=""/></div>
<map name="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph" id="hal__storage_8c_abc699ff3996d12d3e6bcc9e372b277e0_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="249,5,387,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="435,5,561,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="609,5,688,32"/>
</map>
</div>

</div>
</div>
<a id="a75596c64adaa2b8d9104530acc94b094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75596c64adaa2b8d9104530acc94b094">&#9670;&nbsp;</a></span>halStorageLoadName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>load a slot by a slot name</p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slot name.</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotname</td><td>Name of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot name not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00754">754</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00205">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph.png" border="0" usemap="#hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph" alt=""/></div>
<map name="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph" id="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141" title="halStorageGetNumberForName" alt="" coords="407,5,612,32"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a3b1b266074bd493fe43dcf980852a422" title="halStorageLoadNumber" alt="" coords="200,56,359,83"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="907,107,1036,133"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="427,132,592,159"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="702,157,817,184"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#a1503debb336ea2d708e4e0884c7aa6a3" title="Store a virtual button config struct. " alt="" coords="660,208,859,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph.png" border="0" usemap="#hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph" alt=""/></div>
<map name="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph" id="hal__storage_8c_a75596c64adaa2b8d9104530acc94b094_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="200,5,337,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="385,5,512,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="560,5,639,32"/>
</map>
</div>

</div>
</div>
<a id="a3b1b266074bd493fe43dcf980852a422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1b266074bd493fe43dcf980852a422">&#9670;&nbsp;</a></span>halStorageLoadNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadNumber </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>load a slot by a slot number (starting with 1, 0 is default slot)</p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slotnumber, starting with 1. If you load the slot number 0, the default slot is loaded</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnumber</td><td>Number of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot number not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00618">618</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00754">halStorageLoadName()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph.png" border="0" usemap="#hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph" alt=""/></div>
<map name="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph" id="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="672,56,801,83"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="212,56,377,83"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. " alt="" coords="467,81,582,108"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#a1503debb336ea2d708e4e0884c7aa6a3" title="Store a virtual button config struct. " alt="" coords="425,132,624,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph.png" border="0" usemap="#hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph" alt=""/></div>
<map name="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph" id="hal__storage_8c_a3b1b266074bd493fe43dcf980852a422_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="halStorageLoadName" alt="" coords="212,5,359,32"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="407,5,544,32"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="592,5,719,32"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="767,5,845,32"/>
</map>
</div>

</div>
</div>
<a id="ac67aaf5a3af4140bff3d7c134b9d771f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac67aaf5a3af4140bff3d7c134b9d771f">&#9670;&nbsp;</a></span>halStorageStartTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStartTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>tickstowait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start a storage transaction</p>
<p>This method is used to start a transaction and needs to be called BEFORE any further storage access. If this function is successful (within the given ticks, the storage is getting free), a transaction ID is written, which should be used in further storage access.</p>
<p>After finishing, a transaction is terminated by halStorageFinishTransaction.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction if this command was successful, 0 if not. </td></tr>
    <tr><td class="paramname">tickstowait</td><td>Maximum amount of ticks to wait for this command to be successful </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is valid, ESP_FAIL if other tasks did not freed the access in time </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01075">1075</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00205">configSwitcherTask()</a>, <a class="el" href="task__commands_8c_source.html#l00457">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00354">doStorageParsing()</a>, and <a class="el" href="task__commands_8c_source.html#l01138">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ac67aaf5a3af4140bff3d7c134b9d771f_icgraph.png" border="0" usemap="#hal__storage_8c_ac67aaf5a3af4140bff3d7c134b9d771f_icgraph" alt=""/></div>
<map name="hal__storage_8c_ac67aaf5a3af4140bff3d7c134b9d771f_icgraph" id="hal__storage_8c_ac67aaf5a3af4140bff3d7c134b9d771f_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="233,5,371,32"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="614,81,767,108"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="239,107,365,133"/>
<area shape="rect" id="node7" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="256,157,348,184"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="419,5,545,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="651,5,730,32"/>
<area shape="rect" id="node8" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="428,157,536,184"/>
<area shape="rect" id="node9" href="task__commands_8c.html#ac3c72c089d32dea93c45f4f9f8d1f244" title="doKeyboardParsing" alt="" coords="623,132,758,159"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a580d9f6a840975525358033a35f761d0" title="doMouseParsing" alt="" coords="631,183,750,209"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a2ad28759e53bb5082853d8d004767115" title="doMouthpieceSettingsParsing" alt="" coords="593,233,788,260"/>
</map>
</div>

</div>
</div>
<a id="aadf9ff06990d0f0af2eea2e6f2b8082a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadf9ff06990d0f0af2eea2e6f2b8082a">&#9670;&nbsp;</a></span>halStorageStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStore </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a generalConfig_t struct. </p>
<p>This method stores the general config for the given slotnumber. A slot contains: <br />
 -) General Config -) Slotname -) Slotnumber (used for the filename) -) MD5 sum (to check for corrupted content)</p>
<p>If there is already a slot with this given number, it is overwritten!</p>
<p>!! All following halStorageStoreSetVBConfigs (except the parameter slotnumber is used there) are using this slotnumber until halStorageFinishTransaction is called !!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to general config, can be freed after this call </td></tr>
    <tr><td class="paramname">slotname</td><td>Name of this slot </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number where to store this slot </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a1503debb336ea2d708e4e0884c7aa6a3" title="Store a virtual button config struct. ">halStorageStoreSetVBConfigs</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00889">889</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00354">doStorageParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l00132">halStorageCreateDefault()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph.png" border="0" usemap="#hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph" alt=""/></div>
<map name="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph" id="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="168,5,297,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph.png" border="0" usemap="#hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph" alt=""/></div>
<map name="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph" id="hal__storage_8c_aadf9ff06990d0f0af2eea2e6f2b8082a_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="188,5,313,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="168,56,333,83"/>
<area shape="rect" id="node4" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="783,56,920,83"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="halStorageLoadNumber" alt="" coords="381,81,540,108"/>
<area shape="rect" id="node5" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="968,56,1095,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1143,56,1221,83"/>
<area shape="rect" id="node8" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="halStorageLoadName" alt="" coords="588,81,735,108"/>
</map>
</div>

</div>
</div>
<a id="a1503debb336ea2d708e4e0884c7aa6a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1503debb336ea2d708e4e0884c7aa6a3">&#9670;&nbsp;</a></span>halStorageStoreSetVBConfigs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStoreSetVBConfigs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>vb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>configsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a virtual button config struct. </p>
<p>This method stores the config struct for the given virtual button If there is already a config with this given VB, it is overwritten!</p>
<p>Due to different sizes of configs for different functionalities, it is necessary to provide the size of the data to be stored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of the slot on which this config is used. Use 0xFF to ignore and use previous set slot number (by halStorageStore) </td></tr>
    <tr><td class="paramname">config</td><td>Pointer to the VB config </td></tr>
    <tr><td class="paramname">vb</td><td>VirtualButton number </td></tr>
    <tr><td class="paramname">configsize</td><td>Size of this configuration which is stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aadf9ff06990d0f0af2eea2e6f2b8082a" title="Store a generalConfig_t struct. ">halStorageStore</a> </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Storing VBs is only in possible consecutive numbers, starting with 0! Any other attempt to store a VB not starting with 0 will fail. </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00990">990</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00354">doStorageParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l00132">halStorageCreateDefault()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_cgraph.png" border="0" usemap="#hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_cgraph" alt=""/></div>
<map name="hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_cgraph" id="hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="252,5,381,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_icgraph.png" border="0" usemap="#hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_icgraph" alt=""/></div>
<map name="hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_icgraph" id="hal__storage_8c_a1503debb336ea2d708e4e0884c7aa6a3_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b0c55558b32caa21407de8e2277be9" title="doStorageParsing" alt="" coords="272,5,397,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="252,56,417,83"/>
<area shape="rect" id="node4" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="867,56,1004,83"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#a3b1b266074bd493fe43dcf980852a422" title="halStorageLoadNumber" alt="" coords="465,81,624,108"/>
<area shape="rect" id="node5" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1052,56,1179,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1227,56,1305,83"/>
<area shape="rect" id="node8" href="hal__storage_8h.html#a75596c64adaa2b8d9104530acc94b094" title="halStorageLoadName" alt="" coords="672,81,819,108"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a47050fc742d4864291d317dc39914ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47050fc742d4864291d317dc39914ad1">&#9670;&nbsp;</a></span>base_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* base_path = &quot;/spiflash&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partition name (used to define different memory types) </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00083">83</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00775">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00408">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00460">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00359">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l00088">halStorageInit()</a>, <a class="el" href="hal__storage_8c_source.html#l00824">halStorageLoadGetVBConfigs()</a>, <a class="el" href="hal__storage_8c_source.html#l00618">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00889">halStorageStore()</a>, and <a class="el" href="hal__storage_8c_source.html#l00990">halStorageStoreSetVBConfigs()</a>.</p>

</div>
</div>
<a id="afe54e8f771b85765a57fb799302f2a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe54e8f771b85765a57fb799302f2a09">&#9670;&nbsp;</a></span>halStorageMutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SemaphoreHandle_t halStorageMutex = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mutex which is used to avoid multiple access to different loaded slots. </p>
<dl class="section see"><dt>See also</dt><dd>storageCurrentTID </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00067">67</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01128">halStorageFinishTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l01075">halStorageStartTransaction()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
