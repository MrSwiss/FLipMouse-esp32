<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/hal/hal_storage.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_2c1795b0295572423fca70fe6201093a.html">hal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hal_storage.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;freertos/FreeRTOS.h&gt;</code><br />
<code>#include &lt;freertos/event_groups.h&gt;</code><br />
<code>#include &lt;freertos/semphr.h&gt;</code><br />
<code>#include &lt;esp_log.h&gt;</code><br />
<code>#include &lt;mbedtls/md5.h&gt;</code><br />
<code>#include &quot;esp_vfs.h&quot;</code><br />
<code>#include &quot;esp_vfs_fat.h&quot;</code><br />
<code>#include &quot;nvs_flash.h&quot;</code><br />
<code>#include &quot;nvs.h&quot;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config__switcher_8h_source.html">../config_switcher.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__hid_8h_source.html">task_hid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__vb_8h_source.html">task_vb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__debouncer_8h_source.html">task_debouncer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__adc_8h_source.html">hal_adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__io_8h_source.html">hal_io.h</a>&quot;</code><br />
</div>
<p><a href="hal__storage_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structstorageHeader.html">storageHeader</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header for a VB config in FAT file.  <a href="structstorageHeader.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a305aadd4f9039f9f93f76a47d8479fc5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a305aadd4f9039f9f93f76a47d8479fc5">HAL_STORAGE_NVS_NAMESPACE</a>&#160;&#160;&#160;&quot;devcfg&quot;</td></tr>
<tr class="memdesc:a305aadd4f9039f9f93f76a47d8479fc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Namespace for storing NVS key/value pairs.  <a href="#a305aadd4f9039f9f93f76a47d8479fc5">More...</a><br /></td></tr>
<tr class="separator:a305aadd4f9039f9f93f76a47d8479fc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac4672e8f194fe72f4c3f9c4440a907ea"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structstorageHeader.html">storageHeader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#ac4672e8f194fe72f4c3f9c4440a907ea">storageHeader_t</a></td></tr>
<tr class="memdesc:ac4672e8f194fe72f4c3f9c4440a907ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header for a VB config in FAT file.  <a href="#ac4672e8f194fe72f4c3f9c4440a907ea">More...</a><br /></td></tr>
<tr class="separator:ac4672e8f194fe72f4c3f9c4440a907ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8a4828abe0b7cd309fba5c2e5e228b95"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> { <a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95ab13b96bf99a409e019f70dc1602532fd">NEXT</a>, 
<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95ab359289a088e693e1c62099baf550b39">PREV</a>, 
<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95a88ec7d5086d2469ba843c7fcceade8a6">DEFAULT</a>, 
<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95a9e10e3a504fc1980c1866aad86e7f2b6">RESTOREFACTORYSETTINGS</a>
 }</td></tr>
<tr class="separator:a8a4828abe0b7cd309fba5c2e5e228b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a63ec8e05a2bb4c214600e94b8ab05eea">halStorageNVSLoadString</a> (const char *key, char *string)</td></tr>
<tr class="memdesc:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a string from NVS (global, no slot assignment)  <a href="#a63ec8e05a2bb4c214600e94b8ab05eea">More...</a><br /></td></tr>
<tr class="separator:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#aa545d76c7dcaafc129a03dfd9706ca7b">halStorageNVSStoreString</a> (const char *key, char *string)</td></tr>
<tr class="memdesc:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a string into NVS (global, no slot assignment)  <a href="#aa545d76c7dcaafc129a03dfd9706ca7b">More...</a><br /></td></tr>
<tr class="separator:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5da838bef47becbd2b5bd96a60c75b3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#aa5da838bef47becbd2b5bd96a60c75b3">halStorageGetCurrentSlotNumber</a> (void)</td></tr>
<tr class="memdesc:aa5da838bef47becbd2b5bd96a60c75b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of currently loaded slot.  <a href="#aa5da838bef47becbd2b5bd96a60c75b3">More...</a><br /></td></tr>
<tr class="separator:aa5da838bef47becbd2b5bd96a60c75b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2046481d14910cc6a5b0086a796f293b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a2046481d14910cc6a5b0086a796f293b">halStorageGetNameForNumber</a> (uint32_t tid, uint8_t slotnumber, char *slotname)</td></tr>
<tr class="memdesc:a2046481d14910cc6a5b0086a796f293b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of a slot number.  <a href="#a2046481d14910cc6a5b0086a796f293b">More...</a><br /></td></tr>
<tr class="separator:a2046481d14910cc6a5b0086a796f293b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae19bcf97360ccd7af4ddf906ff85141"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#aae19bcf97360ccd7af4ddf906ff85141">halStorageGetNumberForName</a> (uint32_t tid, uint8_t *slotnumber, char *slotname)</td></tr>
<tr class="memdesc:aae19bcf97360ccd7af4ddf906ff85141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of a slotname.  <a href="#aae19bcf97360ccd7af4ddf906ff85141">More...</a><br /></td></tr>
<tr class="separator:aae19bcf97360ccd7af4ddf906ff85141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0a934f829b47e2445189dd95e962d6"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a7e0a934f829b47e2445189dd95e962d6">halStorageGetNumberOfSlots</a> (uint32_t tid, uint8_t *slotsavailable)</td></tr>
<tr class="memdesc:a7e0a934f829b47e2445189dd95e962d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of stored slots.  <a href="#a7e0a934f829b47e2445189dd95e962d6">More...</a><br /></td></tr>
<tr class="separator:a7e0a934f829b47e2445189dd95e962d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a18ba4afaa3fc6e4c16180a79c330ad41">halStorageGetFree</a> (uint32_t *total, uint32_t *free)</td></tr>
<tr class="memdesc:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get free memory (IR &amp; slot storage)  <a href="#a18ba4afaa3fc6e4c16180a79c330ad41">More...</a><br /></td></tr>
<tr class="separator:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afffed2d32aac2287e95d943dd588db6c"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c">halStorageLoad</a> (<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> navigate, uint32_t tid)</td></tr>
<tr class="memdesc:afffed2d32aac2287e95d943dd588db6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by an action.  <a href="#afffed2d32aac2287e95d943dd588db6c">More...</a><br /></td></tr>
<tr class="separator:afffed2d32aac2287e95d943dd588db6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a670ba7fad19e9a70672d73897785712f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a670ba7fad19e9a70672d73897785712f">halStorageLoadNumber</a> (uint8_t slotnumber, uint32_t tid, uint8_t outputSerial)</td></tr>
<tr class="memdesc:a670ba7fad19e9a70672d73897785712f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by a slot number (starting with 0)  <a href="#a670ba7fad19e9a70672d73897785712f">More...</a><br /></td></tr>
<tr class="separator:a670ba7fad19e9a70672d73897785712f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57cdf5734cdbad3dbb5f18f71dd27501"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501">halStorageLoadName</a> (char *slotname, uint32_t tid)</td></tr>
<tr class="memdesc:a57cdf5734cdbad3dbb5f18f71dd27501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by a slot name.  <a href="#a57cdf5734cdbad3dbb5f18f71dd27501">More...</a><br /></td></tr>
<tr class="separator:a57cdf5734cdbad3dbb5f18f71dd27501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa728fac6a17066ecb910c19338ae5288"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#aa728fac6a17066ecb910c19338ae5288">halStorageLoadIR</a> (char *cmdName, <a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="memdesc:aa728fac6a17066ecb910c19338ae5288"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load an IR command by name.  <a href="#aa728fac6a17066ecb910c19338ae5288">More...</a><br /></td></tr>
<tr class="separator:aa728fac6a17066ecb910c19338ae5288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a8347d2c8df82d17bc9af1d007bfd11ae">halStorageDeleteIRCmd</a> (uint8_t slotnr, uint32_t tid)</td></tr>
<tr class="memdesc:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one or all IR commands.  <a href="#a8347d2c8df82d17bc9af1d007bfd11ae">More...</a><br /></td></tr>
<tr class="separator:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53912e9159b29e5fc974a127dbf0982f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a53912e9159b29e5fc974a127dbf0982f">halStorageGetNameForNumberIR</a> (uint32_t tid, uint8_t slotnumber, char *cmdName)</td></tr>
<tr class="memdesc:a53912e9159b29e5fc974a127dbf0982f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of an infrared command stored at the given slot number.  <a href="#a53912e9159b29e5fc974a127dbf0982f">More...</a><br /></td></tr>
<tr class="separator:a53912e9159b29e5fc974a127dbf0982f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0ac79b0e2b273d97e5b806de9eb493"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493">halStorageStoreIR</a> (uint32_t tid, <a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *cfg, char *cmdName)</td></tr>
<tr class="memdesc:ace0ac79b0e2b273d97e5b806de9eb493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store an infrared command to storage.  <a href="#ace0ac79b0e2b273d97e5b806de9eb493">More...</a><br /></td></tr>
<tr class="separator:ace0ac79b0e2b273d97e5b806de9eb493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a531bc39bc2808762298d14b79ac453cd"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a531bc39bc2808762298d14b79ac453cd">halStorageGetNumberForNameIR</a> (uint32_t tid, uint8_t *slotnumber, char *cmdName)</td></tr>
<tr class="memdesc:a531bc39bc2808762298d14b79ac453cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of an IR command.  <a href="#a531bc39bc2808762298d14b79ac453cd">More...</a><br /></td></tr>
<tr class="separator:a531bc39bc2808762298d14b79ac453cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1495c793604980c76b334f6a6d553c3c"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a1495c793604980c76b334f6a6d553c3c">halStorageGetNumberOfIRCmds</a> (uint32_t tid, uint8_t *slotsavailable)</td></tr>
<tr class="memdesc:a1495c793604980c76b334f6a6d553c3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of stored IR commands.  <a href="#a1495c793604980c76b334f6a6d553c3c">More...</a><br /></td></tr>
<tr class="separator:a1495c793604980c76b334f6a6d553c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc699ff3996d12d3e6bcc9e372b277e0"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0">halStorageLoadGetVBConfigs</a> (uint8_t vb, void *vb_config, size_t vb_config_size, uint32_t tid)</td></tr>
<tr class="memdesc:abc699ff3996d12d3e6bcc9e372b277e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load one virtual button config for currently loaded slot.  <a href="#abc699ff3996d12d3e6bcc9e372b277e0">More...</a><br /></td></tr>
<tr class="separator:abc699ff3996d12d3e6bcc9e372b277e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead99606f84645b2bb6ae000461bf819"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819">halStorageStartTransaction</a> (uint32_t *tid, TickType_t tickstowait, const char *caller)</td></tr>
<tr class="memdesc:aead99606f84645b2bb6ae000461bf819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a storage transaction.  <a href="#aead99606f84645b2bb6ae000461bf819">More...</a><br /></td></tr>
<tr class="separator:aead99606f84645b2bb6ae000461bf819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> (uint32_t tid)</td></tr>
<tr class="memdesc:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish a storage transaction.  <a href="#a00b5db14e24d7ada8a42aa6b3f1a1cb7">More...</a><br /></td></tr>
<tr class="separator:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16be2ae040ef4db3b7fb11b46d07c7a1"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a16be2ae040ef4db3b7fb11b46d07c7a1">halStorageStore</a> (uint32_t tid, char *cfgstring, uint8_t slotnumber)</td></tr>
<tr class="memdesc:a16be2ae040ef4db3b7fb11b46d07c7a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a slot.  <a href="#a16be2ae040ef4db3b7fb11b46d07c7a1">More...</a><br /></td></tr>
<tr class="separator:a16be2ae040ef4db3b7fb11b46d07c7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a046daab088cb37e318c07c2728ade9d3"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a046daab088cb37e318c07c2728ade9d3">halStorageStoreSetVBConfigs</a> (uint8_t slotnumber, <a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *config, uint32_t tid)</td></tr>
<tr class="memdesc:a046daab088cb37e318c07c2728ade9d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a virtual button config struct.  <a href="#a046daab088cb37e318c07c2728ade9d3">More...</a><br /></td></tr>
<tr class="separator:a046daab088cb37e318c07c2728ade9d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba">halStorageCreateDefault</a> (uint32_t tid)</td></tr>
<tr class="memdesc:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new default slot.  <a href="#aed4beb2e1bd8cd78a201fbcb49958cba">More...</a><br /></td></tr>
<tr class="separator:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8h.html#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">halStorageDeleteSlot</a> (int16_t slotnr, uint32_t tid)</td></tr>
<tr class="memdesc:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one or all slots.  <a href="#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">More...</a><br /></td></tr>
<tr class="separator:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs. </p>
<p>This module stores general configs &amp; virtual button configurations to a storage area. In case of the ESP32 we use FAT with wear leveling, which is provided by the esp-idf. <b>Warning:</b> Please adjust the esp-idf to us 512Byte sectors and <b>mode "safety"</b>! We don't do any safe copying, just building a checksum to detect faulty slots.</p>
<p>This module can be used to store a config struct (generalConfig_t) and the corresponding virtual button config structs to the storage.</p>
<p>Following commands are implemented here:</p><ul>
<li>list all slot names</li>
<li>load default slot</li>
<li>load next or previous slot</li>
<li>load slot by name or number</li>
<li>store a given slot</li>
<li>delete one slot</li>
<li>delete all slots</li>
<li>delete one or all IR commands</li>
<li>get number of stored IR commands</li>
<li>load an IR command</li>
<li>get names for IR commands</li>
</ul>
<p>This module starts one task on its own for maintaining the storage access. All methods called from this module will block via a semaphore until the requested operation is finished.</p>
<p>For storing small amounts global, non-volatile data, it is possible to use halStorageNVSLoad &amp; halStorageNVSStore operations. In this case, no transaction id is necessary.</p>
<p>Slots are stored in following naming convention (8.3 rule applies here): general slot config: xxx.fms (slot number, e.g., 001.fms for slot 1) virtual button config for slot xxx xxx_VB.fms</p>
<dl class="section note"><dt>Note</dt><dd>Maximum number of slots: 250! (e.g. 250.fms) </dd>
<dd>
Maximum number of IR commands: 100 (0-100, e.g. IR_99.fms) </dd>
<dd>
Use halStorageStartTransaction and halStorageFinishTransaction on begin/end of loading&amp;storing (except for halStorageNVS* operations) </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Adjust the esp-idf (via "make menuconfig") to use 512B sectors and mode <b>safety</b>!</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000039">Todo:</a></b></dt><dd>Put delete/save to a task, takes very long time...</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a305aadd4f9039f9f93f76a47d8479fc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a305aadd4f9039f9f93f76a47d8479fc5">&#9670;&nbsp;</a></span>HAL_STORAGE_NVS_NAMESPACE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_STORAGE_NVS_NAMESPACE&#160;&#160;&#160;&quot;devcfg&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Namespace for storing NVS key/value pairs. </p>
<dl class="section warning"><dt>Warning</dt><dd>If changed, all previously data cannot be used! </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8h_source.html#l00104">104</a> of file <a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00108">halStorageNVSLoadString()</a>, and <a class="el" href="hal__storage_8c_source.html#l00140">halStorageNVSStoreString()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ac4672e8f194fe72f4c3f9c4440a907ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4672e8f194fe72f4c3f9c4440a907ea">&#9670;&nbsp;</a></span>storageHeader_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structstorageHeader.html">storageHeader</a>  <a class="el" href="hal__storage_8h.html#ac4672e8f194fe72f4c3f9c4440a907ea">storageHeader_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Header for a VB config in FAT file. </p>
<p>This struct is placed in front of each VB config, which is stored in the VB config file.</p>
<p>Used in store/load VBs. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. ">halStorageStoreSetVBConfigs</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a8a4828abe0b7cd309fba5c2e5e228b95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4828abe0b7cd309fba5c2e5e228b95">&#9670;&nbsp;</a></span>hal_storage_load_action</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8a4828abe0b7cd309fba5c2e5e228b95ab13b96bf99a409e019f70dc1602532fd"></a>NEXT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8a4828abe0b7cd309fba5c2e5e228b95ab359289a088e693e1c62099baf550b39"></a>PREV&#160;</td><td class="fielddoc"><p>load next slot (no name needed) </p>
</td></tr>
<tr><td class="fieldname"><a id="a8a4828abe0b7cd309fba5c2e5e228b95a88ec7d5086d2469ba843c7fcceade8a6"></a>DEFAULT&#160;</td><td class="fielddoc"><p>load previous slot (no name needed) </p>
</td></tr>
<tr><td class="fieldname"><a id="a8a4828abe0b7cd309fba5c2e5e228b95a9e10e3a504fc1980c1866aad86e7f2b6"></a>RESTOREFACTORYSETTINGS&#160;</td><td class="fielddoc"><p>load default slot (no name needed) WARNING: deletes all saved slots, except the default slot (which can be overwritten as well) </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="hal__storage_8h_source.html#l00106">106</a> of file <a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aed4beb2e1bd8cd78a201fbcb49958cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4beb2e1bd8cd78a201fbcb49958cba">&#9670;&nbsp;</a></span>halStorageCreateDefault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halStorageCreateDefault </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new default slot. </p>
<p>Create a new default slot in memory. The default settings are hardcoded here to provide a fallback solution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Valid transaction ID</td></tr>
  </table>
  </dd>
</dl>
<p>Copy the flashed default.set file to the working config.set file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Valid transaction ID </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00261">261</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00900">halStorageLoadNumber()</a>, and <a class="el" href="task__commands_8c_source.html#l01757">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph.png" border="0" usemap="#hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" alt=""/></div>
<map name="hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" id="hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="219,5,348,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph.png" border="0" usemap="#hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" alt=""/></div>
<map name="hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" id="hal__storage_8h_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="219,132,377,159"/>
<area shape="rect" id="node3" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="453,81,545,108"/>
<area shape="rect" id="node13" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="443,132,555,159"/>
<area shape="rect" id="node16" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="425,183,572,209"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="826,5,979,32"/>
<area shape="rect" id="node9" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="635,81,743,108"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1052,107,1171,133"/>
<area shape="rect" id="node6" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1235,107,1367,133"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1223,157,1380,184"/>
<area shape="rect" id="node7" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1428,157,1507,184"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="838,56,967,83"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="835,107,970,133"/>
<area shape="rect" id="node12" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="805,157,1000,184"/>
<area shape="rect" id="node14" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="620,183,757,209"/>
<area shape="rect" id="node15" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1048,208,1175,235"/>
</map>
</div>

</div>
</div>
<a id="a8347d2c8df82d17bc9af1d007bfd11ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8347d2c8df82d17bc9af1d007bfd11ae">&#9670;&nbsp;</a></span>halStorageDeleteIRCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageDeleteIRCmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one or all IR commands. </p>
<p>This function is used to delete one IR command or all commands (depending on parameter slotnr)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use 100 to delete all slots </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise</dd></dl>
<p>This function is used to delete one IR command or all commands (depending on parameter slotnr)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use 250 to delete all slots </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Setting slotnr to 100 deletes all IR slots. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00472">472</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00639">doInfraredParsing()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph.png" border="0" usemap="#hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph" alt=""/></div>
<map name="hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph" id="hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="217,5,347,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph.png" border="0" usemap="#hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph" alt=""/></div>
<map name="hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph" id="hal__storage_8h_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b696a381aec817e617d2b33da045f5" title="doInfraredParsing" alt="" coords="217,31,341,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="389,31,508,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="569,5,701,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="556,56,713,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="761,5,840,32"/>
</map>
</div>

</div>
</div>
<a id="a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">&#9670;&nbsp;</a></span>halStorageDeleteSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageDeleteSlot </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>slotnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one or all slots. </p>
<p>This function is used to delete one slot or all slots (depending on parameter slotnumber)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use -1 to delete all slots </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise</dd></dl>
<p>This function is used to delete one slot or all slots (depending on parameter slotnr)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use -1 to delete all slots </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Deleting all slots, means that a complete factory reset is done. Maybe we change this in release versions. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01123">1123</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00194">configSwitcherTask()</a>, and <a class="el" href="task__commands_8c_source.html#l00797">doGeneralCmdParsing()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph.png" border="0" usemap="#hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph" alt=""/></div>
<map name="hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph" id="hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="199,5,328,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph.png" border="0" usemap="#hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph" alt=""/></div>
<map name="hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph" id="hal__storage_8h_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="207,5,344,32"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="199,56,352,83"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="400,5,527,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="780,31,859,57"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="404,56,523,83"/>
<area shape="rect" id="node7" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="587,56,719,83"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="575,107,732,133"/>
</map>
</div>

</div>
</div>
<a id="a00b5db14e24d7ada8a42aa6b3f1a1cb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b5db14e24d7ada8a42aa6b3f1a1cb7">&#9670;&nbsp;</a></span>halStorageFinishTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageFinishTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish a storage transaction. </p>
<p>This method is used to stop a transaction and needs to be called AFTER storage access, enabling other tasks to acquire the storage module.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction to be finished </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is freed, ESP_FAIL if the tid is not valid </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01534">1534</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00194">configSwitcherTask()</a>, <a class="el" href="task__commands_8c_source.html#l00797">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00639">doInfraredParsing()</a>, <a class="el" href="task__infrared_8c_source.html#l00153">infrared_record()</a>, <a class="el" href="task__commands_8c_source.html#l01757">printAllSlots()</a>, <a class="el" href="task__commands_8c_source.html#l01814">storeSlot()</a>, <a class="el" href="task__infrared_8c_source.html#l00051">task_infrared()</a>, and <a class="el" href="task__webgui_8c_source.html#l00569">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph.png" border="0" usemap="#hal__storage_8h_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" alt=""/></div>
<map name="hal__storage_8h_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" id="hal__storage_8h_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="240,6,377,33"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="619,57,773,83"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a69b696a381aec817e617d2b33da045f5" title="doInfraredParsing" alt="" coords="426,310,550,337"/>
<area shape="rect" id="node10" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="255,310,363,337"/>
<area shape="rect" id="node11" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="263,158,355,185"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="271,209,346,235"/>
<area shape="rect" id="node18" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="260,411,357,438"/>
<area shape="rect" id="node19" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="847,315,963,342"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="841,107,968,134"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1221,177,1300,203"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="845,183,964,210"/>
<area shape="rect" id="node7" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1029,177,1161,203"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1016,227,1173,254"/>
<area shape="rect" id="node12" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="434,158,542,185"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="631,107,761,134"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="629,158,763,185"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="599,209,793,235"/>
<area shape="rect" id="node17" href="task__commands_8c.html#a770d94bfbf3d8c959ac003816d2b41fe" title="doStorageParsing" alt="" coords="425,234,551,261"/>
</map>
</div>

</div>
</div>
<a id="aa5da838bef47becbd2b5bd96a60c75b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5da838bef47becbd2b5bd96a60c75b3">&#9670;&nbsp;</a></span>halStorageGetCurrentSlotNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t halStorageGetCurrentSlotNumber </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of currently loaded slot. </p>
<p>An empty device will return 0</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a5c097404b5dfa34bdac65865586dac5a" title="Currently activated slot number. ">storageCurrentSlotNumber</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Currently loaded slot number </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00346">346</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00194">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aa5da838bef47becbd2b5bd96a60c75b3_icgraph.png" border="0" usemap="#hal__storage_8h_aa5da838bef47becbd2b5bd96a60c75b3_icgraph" alt=""/></div>
<map name="hal__storage_8h_aa5da838bef47becbd2b5bd96a60c75b3_icgraph" id="hal__storage_8h_aa5da838bef47becbd2b5bd96a60c75b3_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="224,13,361,39"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="409,13,536,39"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="584,13,663,39"/>
</map>
</div>

</div>
</div>
<a id="a18ba4afaa3fc6e4c16180a79c330ad41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18ba4afaa3fc6e4c16180a79c330ad41">&#9670;&nbsp;</a></span>halStorageGetFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetFree </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>total</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>free</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get free memory (IR &amp; slot storage) </p>
<p>This method returns the number of total and free bytes in current used persistant memory (used for storing IR commands and slot storage).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">total</td><td>Pointer where the number of total possible bytes is stored </td></tr>
    <tr><td class="paramname">free</td><td>Pointer where the number of free bytes is stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if reading is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00175">175</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00797">doGeneralCmdParsing()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph.png" border="0" usemap="#hal__storage_8h_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph" alt=""/></div>
<map name="hal__storage_8h_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph" id="hal__storage_8h_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="184,31,337,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="385,31,504,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="565,5,697,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="552,56,709,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="757,5,836,32"/>
</map>
</div>

</div>
</div>
<a id="a2046481d14910cc6a5b0086a796f293b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2046481d14910cc6a5b0086a796f293b">&#9670;&nbsp;</a></span>halStorageGetNameForNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNameForNumber </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of a slot number. </p>
<p>Get the name of a slot number</p>
<p>This method returns the name of the given slot number. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Memory to store the slotname to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise</dd></dl>
<p>This method returns the name of the given slot number. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Memory to store the slotname to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00638">638</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00712">halStorageGetNumberForName()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_cgraph.png" border="0" usemap="#hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_cgraph" alt=""/></div>
<map name="hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_cgraph" id="hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="259,5,388,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="strip" alt="" coords="300,56,347,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_icgraph.png" border="0" usemap="#hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_icgraph" alt=""/></div>
<map name="hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_icgraph" id="hal__storage_8h_a2046481d14910cc6a5b0086a796f293b_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="259,189,464,216"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="913,189,1066,216"/>
<area shape="rect" id="node8" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="548,113,623,140"/>
<area shape="rect" id="node14" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="512,240,659,266"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1139,113,1257,140"/>
<area shape="rect" id="node5" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1322,113,1454,140"/>
<area shape="rect" id="node7" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1309,164,1467,190"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1515,164,1593,190"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a770d94bfbf3d8c959ac003816d2b41fe" title="doStorageParsing" alt="" coords="713,25,838,52"/>
<area shape="rect" id="node10" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="721,113,829,140"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="925,88,1054,114"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="922,138,1057,165"/>
<area shape="rect" id="node13" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="892,37,1087,64"/>
<area shape="rect" id="node15" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="707,240,844,266"/>
<area shape="rect" id="node16" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1135,240,1261,266"/>
</map>
</div>

</div>
</div>
<a id="a53912e9159b29e5fc974a127dbf0982f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53912e9159b29e5fc974a127dbf0982f">&#9670;&nbsp;</a></span>halStorageGetNameForNumberIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNameForNumberIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of an infrared command stored at the given slot number. </p>
<p>This method returns the name of the given slot number for IR commands. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cmdName</td><td>Memory to store the command name to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00412">412</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00639">doInfraredParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l00759">halStorageGetNumberForNameIR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_cgraph.png" border="0" usemap="#hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_cgraph" alt=""/></div>
<map name="hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_cgraph" id="hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="272,5,401,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_icgraph.png" border="0" usemap="#hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_icgraph" alt=""/></div>
<map name="hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_icgraph" id="hal__storage_8h_a53912e9159b29e5fc974a127dbf0982f_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b696a381aec817e617d2b33da045f5" title="doInfraredParsing" alt="" coords="872,31,996,57"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#a531bc39bc2808762298d14b79ac453cd" title="Get the number of an IR command. " alt="" coords="272,31,491,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1044,31,1163,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1223,5,1355,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1211,56,1368,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1416,5,1495,32"/>
<area shape="rect" id="node8" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="539,81,668,108"/>
<area shape="rect" id="node9" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="716,81,824,108"/>
</map>
</div>

</div>
</div>
<a id="aae19bcf97360ccd7af4ddf906ff85141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae19bcf97360ccd7af4ddf906ff85141">&#9670;&nbsp;</a></span>halStorageGetNumberForName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberForName </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of a slotname. </p>
<p>This method returns the number of the given slotname. An invalid name will return ESP_FAIL and a slotnumber of 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Name of the slot to be looked for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00712">712</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00797">doGeneralCmdParsing()</a>, <a class="el" href="hal__storage_8c_source.html#l01101">halStorageLoadName()</a>, and <a class="el" href="task__commands_8c_source.html#l01814">storeSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_cgraph.png" border="0" usemap="#hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_cgraph" alt=""/></div>
<map name="hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_cgraph" id="hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="512,5,641,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="259,56,464,83"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="strip" alt="" coords="553,56,600,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_icgraph.png" border="0" usemap="#hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_icgraph" alt=""/></div>
<map name="hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_icgraph" id="hal__storage_8h_aae19bcf97360ccd7af4ddf906ff85141_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="659,189,813,216"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="259,240,405,266"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="295,113,369,140"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="885,113,1004,140"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1069,113,1201,140"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1056,164,1213,190"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1261,164,1340,190"/>
<area shape="rect" id="node8" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="453,240,591,266"/>
<area shape="rect" id="node9" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="881,240,1008,266"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a770d94bfbf3d8c959ac003816d2b41fe" title="doStorageParsing" alt="" coords="459,25,585,52"/>
<area shape="rect" id="node12" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="468,113,576,140"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="671,88,801,114"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="669,138,803,165"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="639,37,833,64"/>
</map>
</div>

</div>
</div>
<a id="a531bc39bc2808762298d14b79ac453cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531bc39bc2808762298d14b79ac453cd">&#9670;&nbsp;</a></span>halStorageGetNumberForNameIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberForNameIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of an IR command. </p>
<p>This method returns the number of the given IR command name. An invalid name will return ESP_FAIL and a slotnumber of 0xFF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cmdName</td><td>Name of the IR command to look for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise</dd></dl>
<p>Get the number of an IR command.</p>
<p>This method returns the number of the given IR command name. An invalid name will return ESP_OK and a slotnumber of 0xFF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cmdName</td><td>Name of the IR command to look for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00759">759</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00639">doInfraredParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l01266">halStorageStoreIR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_cgraph.png" border="0" usemap="#hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_cgraph" alt=""/></div>
<map name="hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_cgraph" id="hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="539,5,668,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a53912e9159b29e5fc974a127dbf0982f" title="Get the name of an infrared command stored at the given slot number. " alt="" coords="272,31,491,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_icgraph.png" border="0" usemap="#hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_icgraph" alt=""/></div>
<map name="hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_icgraph" id="hal__storage_8h_a531bc39bc2808762298d14b79ac453cd_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b696a381aec817e617d2b33da045f5" title="doInfraredParsing" alt="" coords="605,31,729,57"/>
<area shape="rect" id="node7" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="272,56,401,83"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="777,31,896,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="957,5,1089,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="944,56,1101,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1149,5,1228,32"/>
<area shape="rect" id="node8" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="449,56,557,83"/>
</map>
</div>

</div>
</div>
<a id="a1495c793604980c76b334f6a6d553c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1495c793604980c76b334f6a6d553c3c">&#9670;&nbsp;</a></span>halStorageGetNumberOfIRCmds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberOfIRCmds </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotsavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of stored IR commands. </p>
<p>This method returns the number of available IR commands. An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotsavailable</td><td>Variable where the slot count will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00543">543</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00639">doInfraredParsing()</a>, and <a class="el" href="hal__storage_8c_source.html#l00587">halStorageGetFreeIRCmdSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_cgraph.png" border="0" usemap="#hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_cgraph" alt=""/></div>
<map name="hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_cgraph" id="hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="268,5,397,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_icgraph.png" border="0" usemap="#hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_icgraph" alt=""/></div>
<map name="hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_icgraph" id="hal__storage_8h_a1495c793604980c76b334f6a6d553c3c_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a69b696a381aec817e617d2b33da045f5" title="doInfraredParsing" alt="" coords="845,31,969,57"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260" title="Get the number of first available slot for an IR command. " alt="" coords="268,56,464,83"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1017,31,1136,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1197,5,1329,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1184,56,1341,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1389,5,1468,32"/>
<area shape="rect" id="node8" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="512,56,641,83"/>
<area shape="rect" id="node9" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="689,56,797,83"/>
</map>
</div>

</div>
</div>
<a id="a7e0a934f829b47e2445189dd95e962d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e0a934f829b47e2445189dd95e962d6">&#9670;&nbsp;</a></span>halStorageGetNumberOfSlots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberOfSlots </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotsavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of stored slots. </p>
<p>This method returns the number of available slots (the default slot is not counted). An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotsavailable</td><td>Variable where the slot count will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00363">363</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00817">halStorageLoad()</a>, <a class="el" href="task__commands_8c_source.html#l01757">printAllSlots()</a>, and <a class="el" href="task__commands_8c_source.html#l01814">storeSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_cgraph.png" border="0" usemap="#hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_cgraph" alt=""/></div>
<map name="hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_cgraph" id="hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="248,5,377,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_icgraph.png" border="0" usemap="#hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_icgraph" alt=""/></div>
<map name="hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_icgraph" id="hal__storage_8h_a7e0a934f829b47e2445189dd95e962d6_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="248,5,360,32"/>
<area shape="rect" id="node6" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="258,56,350,83"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="267,107,341,133"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="408,5,545,32"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="836,9,963,36"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1216,44,1295,71"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="614,56,767,83"/>
<area shape="rect" id="node11" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="423,107,531,133"/>
<area shape="rect" id="node8" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="840,151,959,177"/>
<area shape="rect" id="node9" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1023,75,1155,101"/>
<area shape="rect" id="node10" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1011,151,1168,177"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="626,107,755,133"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="623,157,758,184"/>
<area shape="rect" id="node14" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="593,208,788,235"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a770d94bfbf3d8c959ac003816d2b41fe" title="doStorageParsing" alt="" coords="414,208,539,235"/>
</map>
</div>

</div>
</div>
<a id="afffed2d32aac2287e95d943dd588db6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afffed2d32aac2287e95d943dd588db6c">&#9670;&nbsp;</a></span>halStorageLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a>&#160;</td>
          <td class="paramname"><em>navigate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by an action. </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the navigate parameter, using next/prev/default</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data.</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">navigate</td><td>Action defining the next loaded slot (default or prev/next) </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00817">817</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00194">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_cgraph.png" border="0" usemap="#hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_cgraph" alt=""/></div>
<map name="hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_cgraph" id="hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6" title="Get the number of stored slots. " alt="" coords="165,5,360,32"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="183,81,342,108"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="621,31,751,57"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="408,81,573,108"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="strip" alt="" coords="467,132,514,159"/>
<area shape="rect" id="node7" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="409,183,572,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_icgraph.png" border="0" usemap="#hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_icgraph" alt=""/></div>
<map name="hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_icgraph" id="hal__storage_8h_afffed2d32aac2287e95d943dd588db6c_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="165,5,303,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="351,5,477,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="525,5,604,32"/>
</map>
</div>

</div>
</div>
<a id="abc699ff3996d12d3e6bcc9e372b277e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc699ff3996d12d3e6bcc9e372b277e0">&#9670;&nbsp;</a></span>halStorageLoadGetVBConfigs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadGetVBConfigs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>vb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vb_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>vb_config_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load one virtual button config for currently loaded slot. </p>
<p>This function is used to load one virtual button config after the slot was loaded (either by name, number or action).</p>
<p>Please use the same transaction id as for loading the slot. It is not possible to use the same tid after halStorageFinishTransaction was called.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. ">halStorageLoad</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. ">halStorageLoadName</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) ">halStorageLoadNumber</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vb</td><td>Number of virtual button config to be loaded </td></tr>
    <tr><td class="paramname">vb_config</td><td>Pointer to config struct which holds the VB config data </td></tr>
    <tr><td class="paramname">vb_config_size</td><td>Size of config which will be loaded (differs between functions) </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (no config found or no slot loaded) </dd></dl>

</div>
</div>
<a id="aa728fac6a17066ecb910c19338ae5288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa728fac6a17066ecb910c19338ae5288">&#9670;&nbsp;</a></span>halStorageLoadIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadIR </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load an IR command by name. </p>
<p>This method loads an IR command from storage. The slot is defined by the slot name.</p>
<p>To start loading a command, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access. Finally, if the command is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdName</td><td>Name of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot name not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01364">1364</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__infrared_8c_source.html#l00051">task_infrared()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_cgraph.png" border="0" usemap="#hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_cgraph" alt=""/></div>
<map name="hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_cgraph" id="hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="180,5,309,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_icgraph.png" border="0" usemap="#hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_icgraph" alt=""/></div>
<map name="hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_icgraph" id="hal__storage_8h_aa728fac6a17066ecb910c19338ae5288_icgraph">
<area shape="rect" id="node2" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="180,5,277,32"/>
</map>
</div>

</div>
</div>
<a id="a57cdf5734cdbad3dbb5f18f71dd27501"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57cdf5734cdbad3dbb5f18f71dd27501">&#9670;&nbsp;</a></span>halStorageLoadName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by a slot name. </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slot name.</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotname</td><td>Name of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot name not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01101">1101</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00194">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph.png" border="0" usemap="#hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph" alt=""/></div>
<map name="hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph" id="hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="200,157,405,184"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="223,107,382,133"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="707,183,836,209"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="453,157,659,184"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="strip" alt="" coords="748,132,795,159"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="473,208,639,235"/>
<area shape="rect" id="node8" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="475,5,637,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph.png" border="0" usemap="#hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph" alt=""/></div>
<map name="hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph" id="hal__storage_8h_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="200,5,337,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="385,5,512,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="560,5,639,32"/>
</map>
</div>

</div>
</div>
<a id="a670ba7fad19e9a70672d73897785712f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a670ba7fad19e9a70672d73897785712f">&#9670;&nbsp;</a></span>halStorageLoadNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadNumber </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>outputSerial</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by a slot number (starting with 0) </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slotnumber, starting with 1. If you load the slot number 0, the default slot is loaded</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnumber</td><td>Number of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">outputSerial</td><td>Either the loaded AT commands are sent to the command parser (== 0) or sent to the serial output </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If sending to serial port, the slot name is printed as well ("Slot &lt;number&gt;:&lt;name&gt;). </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot number not found)</dd></dl>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slotnumber, starting with 1. If you load the slot number 0, the default slot is loaded</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnumber</td><td>Number of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">outputSerial</td><td>Either the loaded AT commands are sent to the command parser (== 0) or sent to the serial output </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If sending to serial port, the slot name is printed as well ("Slot &lt;number&gt;:&lt;name&gt;).
@note If param outputserial is set to 1, the full config is printed. If set to 2, only slotnames are printed (used for "AT LI").
In addition, for compatibility reasons, AT LI outputs e.g. "Slot 1:mouse", AT LA outputs "Slot:mouse". </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot number not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00900">900</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00817">halStorageLoad()</a>, <a class="el" href="hal__storage_8c_source.html#l01101">halStorageLoadName()</a>, and <a class="el" href="task__commands_8c_source.html#l01757">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a670ba7fad19e9a70672d73897785712f_cgraph.png" border="0" usemap="#hal__storage_8h_a670ba7fad19e9a70672d73897785712f_cgraph" alt=""/></div>
<map name="hal__storage_8h_a670ba7fad19e9a70672d73897785712f_cgraph" id="hal__storage_8h_a670ba7fad19e9a70672d73897785712f_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="425,5,555,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="212,31,377,57"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="strip" alt="" coords="271,81,318,108"/>
<area shape="rect" id="node5" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="213,132,376,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a670ba7fad19e9a70672d73897785712f_icgraph.png" border="0" usemap="#hal__storage_8h_a670ba7fad19e9a70672d73897785712f_icgraph" alt=""/></div>
<map name="hal__storage_8h_a670ba7fad19e9a70672d73897785712f_icgraph" id="hal__storage_8h_a670ba7fad19e9a70672d73897785712f_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="229,5,341,32"/>
<area shape="rect" id="node6" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="212,56,359,83"/>
<area shape="rect" id="node7" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="239,107,331,133"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="407,31,544,57"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="835,31,961,57"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1215,56,1293,83"/>
<area shape="rect" id="node8" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="613,81,766,108"/>
<area shape="rect" id="node12" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="421,132,529,159"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="839,132,957,159"/>
<area shape="rect" id="node10" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1022,81,1154,108"/>
<area shape="rect" id="node11" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1009,132,1167,159"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="625,132,754,159"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="622,183,757,209"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="592,233,787,260"/>
</map>
</div>

</div>
</div>
<a id="a63ec8e05a2bb4c214600e94b8ab05eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63ec8e05a2bb4c214600e94b8ab05eea">&#9670;&nbsp;</a></span>halStorageNVSLoadString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageNVSLoadString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a string from NVS (global, no slot assignment) </p>
<p>This method is used to load a string from a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value, same as used on store </td></tr>
    <tr><td class="paramname">string</td><td>Buffer for string to be read from flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_get_str</dd></dl>
<p>This method is used to load a string from a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value, same as used on store </td></tr>
    <tr><td class="paramname">string</td><td>Buffer for string to be read from flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Provide sufficient buffer length, otherwise a CPU exception will happen! </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_get_str </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00108">108</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00569">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph.png" border="0" usemap="#hal__storage_8h_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph" alt=""/></div>
<map name="hal__storage_8h_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph" id="hal__storage_8h_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph">
<area shape="rect" id="node2" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="228,5,344,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="392,5,471,32"/>
</map>
</div>

</div>
</div>
<a id="aa545d76c7dcaafc129a03dfd9706ca7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa545d76c7dcaafc129a03dfd9706ca7b">&#9670;&nbsp;</a></span>halStorageNVSStoreString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageNVSStoreString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a string into NVS (global, no slot assignment) </p>
<p>This method is used to store a string in a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value on read. </td></tr>
    <tr><td class="paramname">string</td><td>String to be stored in flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_set_str</dd></dl>
<p>This method is used to store a string in a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="section warning"><dt>Warning</dt><dd>NVS is not as big as FAT storage, use with care! (max ~10kB) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value on read. </td></tr>
    <tr><td class="paramname">string</td><td>String to be stored in flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_set_str </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00140">140</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00797">doGeneralCmdParsing()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph.png" border="0" usemap="#hal__storage_8h_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph" alt=""/></div>
<map name="hal__storage_8h_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph" id="hal__storage_8h_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="231,31,384,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="432,31,551,57"/>
<area shape="rect" id="node4" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="611,5,743,32"/>
<area shape="rect" id="node6" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="599,56,756,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="804,5,883,32"/>
</map>
</div>

</div>
</div>
<a id="aead99606f84645b2bb6ae000461bf819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead99606f84645b2bb6ae000461bf819">&#9670;&nbsp;</a></span>halStorageStartTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStartTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>tickstowait</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a storage transaction. </p>
<p>This method is used to start a transaction and needs to be called BEFORE any further storage access. If this function is successful (within the given ticks, the storage is getting free), a transaction ID is written, which should be used in further storage access.</p>
<p>After finishing, a transaction is terminated by halStorageFinishTransaction.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction if this command was successful, 0 if not. </td></tr>
    <tr><td class="paramname">tickstowait</td><td>Maximum amount of ticks to wait for this command to be successful </td></tr>
    <tr><td class="paramname">caller</td><td>Name of calling task, used to track storage access </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is valid, ESP_FAIL if other tasks did not freed the access in time </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01480">1480</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00194">configSwitcherTask()</a>, <a class="el" href="task__commands_8c_source.html#l00797">doGeneralCmdParsing()</a>, <a class="el" href="task__commands_8c_source.html#l00639">doInfraredParsing()</a>, <a class="el" href="task__infrared_8c_source.html#l00153">infrared_record()</a>, <a class="el" href="task__commands_8c_source.html#l01757">printAllSlots()</a>, <a class="el" href="task__commands_8c_source.html#l01814">storeSlot()</a>, <a class="el" href="task__infrared_8c_source.html#l00051">task_infrared()</a>, and <a class="el" href="task__webgui_8c_source.html#l00569">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aead99606f84645b2bb6ae000461bf819_cgraph.png" border="0" usemap="#hal__storage_8h_aead99606f84645b2bb6ae000461bf819_cgraph" alt=""/></div>
<map name="hal__storage_8h_aead99606f84645b2bb6ae000461bf819_cgraph" id="hal__storage_8h_aead99606f84645b2bb6ae000461bf819_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1" title="internal function to init the filesystem if handle is invalid " alt="" coords="233,5,336,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_aead99606f84645b2bb6ae000461bf819_icgraph.png" border="0" usemap="#hal__storage_8h_aead99606f84645b2bb6ae000461bf819_icgraph" alt=""/></div>
<map name="hal__storage_8h_aead99606f84645b2bb6ae000461bf819_icgraph" id="hal__storage_8h_aead99606f84645b2bb6ae000461bf819_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="233,6,371,33"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="613,57,766,83"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a69b696a381aec817e617d2b33da045f5" title="doInfraredParsing" alt="" coords="419,310,543,337"/>
<area shape="rect" id="node10" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="248,310,356,337"/>
<area shape="rect" id="node11" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="256,158,348,185"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="265,209,339,235"/>
<area shape="rect" id="node18" href="task__infrared_8h.html#a2950159444d03958630c6731bd1600c9" title="FUNCTIONAL TASK &#45; Infrared command sending. " alt="" coords="253,411,351,438"/>
<area shape="rect" id="node19" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="840,315,956,342"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="835,107,961,134"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1215,177,1293,203"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="839,183,957,210"/>
<area shape="rect" id="node7" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1022,177,1154,203"/>
<area shape="rect" id="node8" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1009,227,1167,254"/>
<area shape="rect" id="node12" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="427,158,535,185"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="625,107,754,134"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="622,158,757,185"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="592,209,787,235"/>
<area shape="rect" id="node17" href="task__commands_8c.html#a770d94bfbf3d8c959ac003816d2b41fe" title="doStorageParsing" alt="" coords="419,234,544,261"/>
</map>
</div>

</div>
</div>
<a id="a16be2ae040ef4db3b7fb11b46d07c7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16be2ae040ef4db3b7fb11b46d07c7a1">&#9670;&nbsp;</a></span>halStorageStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStore </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cfgstring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a slot. </p>
<p>If there is already a slot with this given number, it is overwritten!</p>
<p>!! All following halStorageStoreSetVBConfigs (except the parameter slotnumber is used there) are using this slotnumber until halStorageFinishTransaction is called !!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfgstring</td><td>Pointer to AT command. On first call use slotname here. </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number where to store this slot </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. ">halStorageStoreSetVBConfigs</a></dd></dl>
<p>If there is already a slot with this given number, it is overwritten!</p>
<p>!! All following halStorageStoreSetVBConfigs (except the parameter slotnumber is used there) are using this slotnumber until halStorageFinishTransaction is called !!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfgstring</td><td>Pointer to AT command. On first call use slotname here. </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number where to store this slot. Only used on first call! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. ">halStorageStoreSetVBConfigs</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000038">Todo:</a></b></dt><dd>not necessary anymore? </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01201">1201</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l01814">storeSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph.png" border="0" usemap="#hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph" alt=""/></div>
<map name="hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph" id="hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="168,5,297,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph.png" border="0" usemap="#hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph" alt=""/></div>
<map name="hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph" id="hal__storage_8h_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="168,61,243,88"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a770d94bfbf3d8c959ac003816d2b41fe" title="doStorageParsing" alt="" coords="291,11,416,37"/>
<area shape="rect" id="node8" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="299,87,407,113"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="707,87,825,113"/>
<area shape="rect" id="node5" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="886,61,1018,88"/>
<area shape="rect" id="node7" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="873,112,1031,139"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1079,61,1157,88"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a7f6500be563a3dce7f0854fceed02fab" title="doGeneralCmdParsing" alt="" coords="485,36,638,63"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a2f0908e9a181ce6f837e67d074a2b723" title="doJoystickParsing" alt="" coords="497,87,626,113"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a30b4c99ded33188ea79b55159263bc7b" title="doKeyboardParsing" alt="" coords="494,137,629,164"/>
<area shape="rect" id="node12" href="task__commands_8c.html#ab58b3673b001ca270dd4a17bb01db6b4" title="doMouthpieceSettingsParsing" alt="" coords="464,188,659,215"/>
</map>
</div>

</div>
</div>
<a id="ace0ac79b0e2b273d97e5b806de9eb493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0ac79b0e2b273d97e5b806de9eb493">&#9670;&nbsp;</a></span>halStorageStoreIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStoreIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store an infrared command to storage. </p>
<p>This method stores a set of IR edges with a given length and a given command name. If there is already a cmd with this given name, it is overwritten!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a IR config, can be freed after this call </td></tr>
    <tr><td class="paramname">cmdName</td><td>Name of this IR command </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16" title="Output IR command. ">halIOIR_t</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#aa728fac6a17066ecb910c19338ae5288" title="Load an IR command by name. ">halStorageLoadIR</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01266">1266</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__infrared_8c_source.html#l00153">infrared_record()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_cgraph.png" border="0" usemap="#hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_cgraph" alt=""/></div>
<map name="hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_cgraph" id="hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="716,45,845,71"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a531bc39bc2808762298d14b79ac453cd" title="Get the number for an IR cmd name. " alt="" coords="183,19,401,46"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260" title="Get the number of first available slot for an IR command. " alt="" coords="194,95,390,122"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a53912e9159b29e5fc974a127dbf0982f" title="Get the name of an infrared command stored at the given slot number. " alt="" coords="449,45,668,71"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a1495c793604980c76b334f6a6d553c3c" title="Get the number of stored IR commands. " alt="" coords="451,146,666,173"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_icgraph.png" border="0" usemap="#hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_icgraph" alt=""/></div>
<map name="hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_icgraph" id="hal__storage_8h_ace0ac79b0e2b273d97e5b806de9eb493_icgraph">
<area shape="rect" id="node2" href="task__infrared_8h.html#a3b5b7c90c92398748f28c75b55edccda" title="Trigger an IR command recording. " alt="" coords="183,31,291,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a69b696a381aec817e617d2b33da045f5" title="doInfraredParsing" alt="" coords="339,31,463,57"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="511,31,629,57"/>
<area shape="rect" id="node5" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="690,5,822,32"/>
<area shape="rect" id="node7" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="677,56,835,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="883,5,961,32"/>
</map>
</div>

</div>
</div>
<a id="a046daab088cb37e318c07c2728ade9d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a046daab088cb37e318c07c2728ade9d3">&#9670;&nbsp;</a></span>halStorageStoreSetVBConfigs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStoreSetVBConfigs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a virtual button config struct. </p>
<p>This method stores the config structs for virtual buttons.</p>
<p>Configs are provided via <a class="el" href="structgeneralConfig.html">generalConfig</a> struct, which contains necessary information:</p><ul>
<li>Size of config</li>
<li>Pointer to current config</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of the slot on which this config is used. Use 0xFF to ignore and use previous set slot number (by halStorageStore) </td></tr>
    <tr><td class="paramname">config</td><td>Pointer to the general config struct (containing pointers/size to VB cfg) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#a16be2ae040ef4db3b7fb11b46d07c7a1" title="Store a slot. ">halStorageStore</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#ac4672e8f194fe72f4c3f9c4440a907ea" title="Header for a VB config in FAT file. ">storageHeader_t</a> </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>size element of generalConfig_t MUST be set to have a successful write. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This method always overwrites an existing config! </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
