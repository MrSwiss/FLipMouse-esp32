<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/flipmouse_fabi_esp32_kbdmouse_main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">flipmouse_fabi_esp32_kbdmouse_main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the main entry point of the ESP32 FLipMouse/FABI firmware.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;freertos/event_groups.h&quot;</code><br />
<code>#include &quot;<a class="el" href="task__kbd_8h_source.html">function_tasks/task_kbd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__mouse_8h_source.html">function_tasks/task_mouse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__debouncer_8h_source.html">function_tasks/task_debouncer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__commands_8h_source.html">function_tasks/task_commands.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__adc_8h_source.html">hal/hal_adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__io_8h_source.html">hal/hal_io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__ble_8h_source.html">hal/hal_ble.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__serial_8h_source.html">hal/hal_serial.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config__switcher_8h_source.html">config_switcher.h</a>&quot;</code><br />
<code>#include &quot;config.h&quot;</code><br />
</div>
<p><a href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;app_main&quot;</td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abce06be17fc37d675118a678a8100a36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36">app_main</a> ()</td></tr>
<tr class="memdesc:abce06be17fc37d675118a678a8100a36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main task, created by esp-idf.  <a href="#abce06be17fc37d675118a678a8100a36">More...</a><br /></td></tr>
<tr class="separator:abce06be17fc37d675118a678a8100a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3633668cff0a27ea52ca662673978667"><td class="memItemLeft" align="right" valign="top">EventGroupHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a3633668cff0a27ea52ca662673978667">virtualButtonsOut</a> [<a class="el" href="common_8h.html#aee89b7237c851b73f694c2fb1530cbeb">NUMBER_VIRTUALBUTTONS</a>]</td></tr>
<tr class="memdesc:a3633668cff0a27ea52ca662673978667"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event group array for all virtual buttons, used by functional tasks to be triggered.  <a href="#a3633668cff0a27ea52ca662673978667">More...</a><br /></td></tr>
<tr class="separator:a3633668cff0a27ea52ca662673978667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a591ffaa399081915a0eab951f83f93e2"><td class="memItemLeft" align="right" valign="top">EventGroupHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a591ffaa399081915a0eab951f83f93e2">virtualButtonsIn</a> [<a class="el" href="common_8h.html#aee89b7237c851b73f694c2fb1530cbeb">NUMBER_VIRTUALBUTTONS</a>]</td></tr>
<tr class="memdesc:a591ffaa399081915a0eab951f83f93e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event group array for all virtual buttons, used by functional tasks to send a signal to the debouncer task.  <a href="#a591ffaa399081915a0eab951f83f93e2">More...</a><br /></td></tr>
<tr class="separator:a591ffaa399081915a0eab951f83f93e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b183880be8976139d636a3a714e315"><td class="memItemLeft" align="right" valign="top">EventGroupHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#ae2b183880be8976139d636a3a714e315">connectionRoutingStatus</a></td></tr>
<tr class="separator:ae2b183880be8976139d636a3a714e315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335382800db2f025b654e38bc4493334"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a335382800db2f025b654e38bc4493334">keyboard_usb_press</a></td></tr>
<tr class="separator:a335382800db2f025b654e38bc4493334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa2a4758b5658496b3acd30defca0344"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#afa2a4758b5658496b3acd30defca0344">keyboard_usb_release</a></td></tr>
<tr class="separator:afa2a4758b5658496b3acd30defca0344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6712dd167c6d09e2c4f92e545c4b527"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#af6712dd167c6d09e2c4f92e545c4b527">keyboard_ble_press</a></td></tr>
<tr class="separator:af6712dd167c6d09e2c4f92e545c4b527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6abced931709a05f1af06406aed36620"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a6abced931709a05f1af06406aed36620">keyboard_ble_release</a></td></tr>
<tr class="separator:a6abced931709a05f1af06406aed36620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa6eb22a0fd9a55a9308d0afd5154bd"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a7aa6eb22a0fd9a55a9308d0afd5154bd">mouse_movement_usb</a></td></tr>
<tr class="separator:a7aa6eb22a0fd9a55a9308d0afd5154bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c7f09dbac02c97076a58d943afd747"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#aa3c7f09dbac02c97076a58d943afd747">mouse_movement_ble</a></td></tr>
<tr class="separator:aa3c7f09dbac02c97076a58d943afd747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae57a2da1ef72f6611b9d71fce0356352"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#ae57a2da1ef72f6611b9d71fce0356352">joystick_movement_usb</a></td></tr>
<tr class="separator:ae57a2da1ef72f6611b9d71fce0356352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6da2ec03555c40a51588302e5879835"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#ae6da2ec03555c40a51588302e5879835">joystick_movement_ble</a></td></tr>
<tr class="separator:ae6da2ec03555c40a51588302e5879835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4701c432a28c389e4b8557f2fa3323d1"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a4701c432a28c389e4b8557f2fa3323d1">config_switcher</a></td></tr>
<tr class="memdesc:a4701c432a28c389e4b8557f2fa3323d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue to receive config changing commands.  <a href="#a4701c432a28c389e4b8557f2fa3323d1">More...</a><br /></td></tr>
<tr class="separator:a4701c432a28c389e4b8557f2fa3323d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the main entry point of the ESP32 FLipMouse/FABI firmware. </p>
<p>In this file, the app_main function is called by the esp-idf. This function initializes all necessary RTOS services &amp; objects, starts necessary tasks and exits afterwards.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp-idf. ">app_main</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;app_main&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00052">52</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abce06be17fc37d675118a678a8100a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce06be17fc37d675118a678a8100a36">&#9670;&nbsp;</a></span>app_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main task, created by esp-idf. </p>
<p>This task is used to initialize all queues &amp; flags. In addition, all necessary tasks are created After initialisation, this task deletes itself. </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">73</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="flipmouse__fabi__esp32__kbdmouse__main_8c_abce06be17fc37d675118a678a8100a36_cgraph.png" border="0" usemap="#flipmouse__fabi__esp32__kbdmouse__main_8c_abce06be17fc37d675118a678a8100a36_cgraph" alt=""/></div>
<map name="flipmouse__fabi__esp32__kbdmouse__main_8c_abce06be17fc37d675118a678a8100a36_cgraph" id="flipmouse__fabi__esp32__kbdmouse__main_8c_abce06be17fc37d675118a678a8100a36_cgraph">
<area shape="rect" id="node2" href="task__debouncer_8c.html#a79d88e490be7198b9cc37556c66b837b" title="Debouncing main task. " alt="" coords="141,105,255,132"/>
<area shape="rect" id="node8" href="hal__adc_8c.html#a6f0d302f35e5b7f7a1144f0ddace35d2" title="Init the ADC driver module. " alt="" coords="158,875,238,901"/>
<area shape="rect" id="node13" href="hal__io_8c.html#aa5ee74913a09cba6dca62bfdc9f8342b" title="Initializing IO HAL. " alt="" coords="379,612,449,639"/>
<area shape="rect" id="node20" href="config__switcher_8c.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="135,969,261,996"/>
<area shape="rect" id="node35" href="hal__ble_8c.html#a8ad6c50e81bae3e24e2f86a2797384c2" title="halBLEInit" alt="" coords="157,384,239,411"/>
<area shape="rect" id="node42" href="hal__serial_8c.html#a2d03c06463b09e33d87d90eb273819b0" title="Initialize the serial HAL. " alt="" coords="153,1093,243,1120"/>
<area shape="rect" id="node48" href="task__commands_8c.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="132,1144,264,1171"/>
<area shape="rect" id="node50" href="hal__adc_8c.html#ae549c157d94729e8b06cb391f0f2c97b" title="Calibration function. " alt="" coords="141,1195,255,1221"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#a921538bec34d128a44a748fd5a2c391f" title="Get the current config struct. " alt="" coords="812,435,933,461"/>
<area shape="rect" id="node4" href="task__debouncer_8c.html#a308ec03f3a777bacc9507657f285159a" title="Look for a possibly running debouncing timer. " alt="" coords="807,17,939,44"/>
<area shape="rect" id="node5" href="task__debouncer_8c.html#a2d41ed2a246a1b8d4ee5510262001e50" title="Start a debouncing timer with given debounce time and VB number. " alt="" coords="373,55,455,81"/>
<area shape="rect" id="node7" href="task__debouncer_8c.html#ad6a8419e00b94feeb5177a3570efe6ba" title="Cancel a possibly running debouncing timer. " alt="" coords="826,93,919,120"/>
<area shape="rect" id="node6" href="task__debouncer_8c.html#a4a76abdbb849aa0bbc66aa001c6f4af9" title="Timer callback for debouncing. " alt="" coords="591,55,724,81"/>
<area shape="rect" id="node9" href="hal__adc_8c.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="586,764,729,791"/>
<area shape="rect" id="node10" href="hal__adc_8c.html#aadc294c08df0386572ffdc8e7228f6b4" title="HAL TASK &#45; Mouse task for ADC. " alt="" coords="807,713,938,740"/>
<area shape="rect" id="node11" href="hal__adc_8c.html#a452077aaa6a576304708d00d4ec439f1" title="HAL TASK &#45; Joystick task for ADC. " alt="" coords="803,764,943,791"/>
<area shape="rect" id="node12" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="799,815,947,841"/>
<area shape="rect" id="node14" href="hal__io_8c.html#addfc4a2f0cb7848979817346b6f53afc" title="GPIO ISR handler for buttons (internal/external) " alt="" coords="599,612,715,639"/>
<area shape="rect" id="node15" href="hal__io_8c.html#a2c496a858bfe63759ccc520a2add4963" title="HAL TASK &#45; IR sending task. " alt="" coords="594,663,721,689"/>
<area shape="rect" id="node17" href="hal__io_8c.html#af049ec6b187a1b5b1575120758561ae8" title="HAL TASK &#45; IR receiving (recording) task. " alt="" coords="594,713,721,740"/>
<area shape="rect" id="node18" href="hal__io_8c.html#ad83b58c9ee836526a874392c0757f42d" title="HAL TASK &#45; LED update task. " alt="" coords="603,460,711,487"/>
<area shape="rect" id="node19" href="hal__io_8c.html#a5c30b3b4a88e8f23489485659d53c7c0" title="HAL TASK &#45; Buzzer update task. " alt="" coords="596,511,719,537"/>
<area shape="rect" id="node16" href="hal__io_8c.html#ac042a2c8cb99fa3ba52f8e494c1bbe13" title="Callback to free the memory after finished transmission. " alt="" coords="826,663,919,689"/>
<area shape="rect" id="node21" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="345,992,483,1019"/>
<area shape="rect" id="node22" href="hal__storage_8c.html#ac67aaf5a3af4140bff3d7c134b9d771f" title="Start a storage transaction. " alt="" coords="567,1321,747,1348"/>
<area shape="rect" id="node23" href="hal__storage_8c.html#aad5b764e7c611ff24dbcdd872dc9ae76" title="Load a slot by an action. " alt="" coords="601,1372,713,1399"/>
<area shape="rect" id="node24" href="hal__storage_8c.html#a5fe9e276fd05e50e4ab9d554ef6f58ca" title="Delete one or all slots. " alt="" coords="585,1423,730,1449"/>
<area shape="rect" id="node25" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="575,815,740,841"/>
<area shape="rect" id="node26" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. " alt="" coords="564,865,751,892"/>
<area shape="rect" id="node27" href="hal__storage_8c.html#a75596c64adaa2b8d9104530acc94b094" title="Load a slot by a slot name. " alt="" coords="584,916,731,943"/>
<area shape="rect" id="node28" href="hal__ble_8c.html#accf307974a0046bce38582d0260bf841" title="halBLEReset" alt="" coords="608,967,707,993"/>
<area shape="rect" id="node29" href="hal__serial_8c.html#ab2261f95747ee5806ebdec880d09ca89" title="Reset the serial HID report data. " alt="" coords="604,1017,711,1044"/>
<area shape="rect" id="node30" href="task__mouse_8c.html#aa8f5c0436e569589e735c419fc3d0ed8" title="FUNCTIONAL TASK &#45; Trigger mouse action. " alt="" coords="611,1068,704,1095"/>
<area shape="rect" id="node31" href="task__macros_8c.html#a7acda2dcac23ebfffade8a15b40d219f" title="FUNCTIONAL TASK &#45; Macro execution. " alt="" coords="612,1119,703,1145"/>
<area shape="rect" id="node32" href="task__kbd_8c.html#a8ff4618047a049178bfb1d60abfefb5d" title="FUNCTIONAL TASK &#45; trigger keyboard actions. " alt="" coords="604,1169,711,1196"/>
<area shape="rect" id="node33" href="task__joystick_8c.html#a3040132b9cef8e73060fcd9c17dc116b" title="FUNCTIONAL TASK &#45; Trigger joystick action. " alt="" coords="608,1220,707,1247"/>
<area shape="rect" id="node34" href="config__switcher_8c.html#a083adf41746c3380dcc6dbc099047f2e" title="FUNCTIONAL TASK &#45; Load another slot. " alt="" coords="588,1271,727,1297"/>
<area shape="rect" id="node36" href="hid__device__le__prf_8c.html#afa62ba26a48e429b592a9e5be49778d8" title="hidd_set_countrycode" alt="" coords="339,511,489,537"/>
<area shape="rect" id="node37" href="keyboard_8c.html#a5d5bd056cc1731c96de8522b7040f5f1" title="Getting the HID country code for a given locale. " alt="" coords="339,207,489,233"/>
<area shape="rect" id="node38" href="esp__hidd__prf__api_8c.html#a4c4c8031f1e6ea5615c28b98d46d6232" title="This function is called to initialize hid device profile. " alt="" coords="344,257,484,284"/>
<area shape="rect" id="node39" href="hal__ble_8c.html#a50ba83bf77cdec4ac247bf44f357f310" title="gap_event_handler" alt="" coords="349,308,479,335"/>
<area shape="rect" id="node40" href="esp__hidd__prf__api_8c.html#a5256c1f0eb079f624ce5e09a47d5b89c" title="This function is called to receive hid device callback event. " alt="" coords="321,359,507,385"/>
<area shape="rect" id="node41" href="hal__ble_8c.html#af6354ad49deff7e2dfb1b8e9072660ee" title="hidd_event_callback" alt="" coords="344,409,484,436"/>
<area shape="rect" id="node43" href="hal__serial_8c.html#ad5198af46e2ca012d539fba22094f581" title="halSerialTaskKeyboardPress" alt="" coords="319,1043,509,1069"/>
<area shape="rect" id="node44" href="hal__serial_8c.html#ac5c6fb8edd37d249a19e6150e16c0239" title="halSerialTaskKeyboardRelease" alt="" coords="312,1093,516,1120"/>
<area shape="rect" id="node45" href="hal__serial_8c.html#a4135f4381e4995152515091845c50c8f" title="halSerialTaskMouse" alt="" coords="344,1144,484,1171"/>
<area shape="rect" id="node46" href="hal__serial_8c.html#af24cc3b9c361b110e30ecdbdc9c4e7bd" title="halSerialTaskJoystick" alt="" coords="339,1195,489,1221"/>
<area shape="rect" id="node47" href="hal__serial_8c.html#ab3a538fb88a9732f0afc0188cc3c9c38" title="UART RX task for AT command pattern detection and parsing. " alt="" coords="354,1245,474,1272"/>
<area shape="rect" id="node49" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="355,1296,473,1323"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4701c432a28c389e4b8557f2fa3323d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4701c432a28c389e4b8557f2fa3323d1">&#9670;&nbsp;</a></span>config_switcher</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t config_switcher</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue to receive config changing commands. </p>
<p>A string is passed to this queue with a maximum length of SLOTNAME_LENGTH.</p>
<p>Either a special command is passed or the slotname which should be loaded. Possible strings to send to this queue:</p><ul>
<li>Name of the slot to be loaded</li>
<li>"__NEXT" for next slot</li>
<li>"__PREVIOUS" for previous slot</li>
<li>"__DEFAULT" for default slot</li>
<li>"__RESTOREFACTORY" to delete all slots &amp; reset default slot to factory defaults</li>
<li>"__UPDATE" to reload tasks based on currentConfig. Used to update the configuration when changed by configuration software/GUI.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK - Config switcher task, internal config reloading. ">configSwitcherTask</a> </dd>
<dd>
currentConfig </dd></dl>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00065">65</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="config__switcher_8c_source.html#l00513">configSwitcherInit()</a>, <a class="el" href="config__switcher_8c_source.html#l00198">configSwitcherTask()</a>, <a class="el" href="config__switcher_8c_source.html#l00131">configUpdate()</a>, and <a class="el" href="config__switcher_8c_source.html#l00447">task_configswitcher()</a>.</p>

</div>
</div>
<a id="ae2b183880be8976139d636a3a714e315"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2b183880be8976139d636a3a714e315">&#9670;&nbsp;</a></span>connectionRoutingStatus</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EventGroupHandle_t connectionRoutingStatus</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>this flag group is used to determine the routing of different data to either USB, BLE or both. In addition this flag group contains status information (1&lt;&lt;7) should send data to USB HID? (1&lt;&lt;6) should send data to BLE HID?</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a9f5db9a2d9f33eb7e1b8e82ca2dffe81">DATATO_USB</a> </dd>
<dd>
<a class="el" href="common_8h.html#a23e20bbc7b5cb196155927ffb1375bed">DATATO_BLE</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00056">56</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="config__switcher_8c_source.html#l00198">configSwitcherTask()</a>, <a class="el" href="hal__adc_8c_source.html#l00287">halAdcTaskMouse()</a>, <a class="el" href="task__kbd_8c_source.html#l00144">sendKbd()</a>, <a class="el" href="task__joystick_8c_source.html#l00053">task_joystick()</a>, and <a class="el" href="task__mouse_8c_source.html#l00079">task_mouse()</a>.</p>

</div>
</div>
<a id="ae6da2ec03555c40a51588302e5879835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6da2ec03555c40a51588302e5879835">&#9670;&nbsp;</a></span>joystick_movement_ble</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t joystick_movement_ble</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>queue which receives joystick commands, triggered via BLE </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00064">64</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__adc_8c_source.html#l00753">halAdcInit()</a>, <a class="el" href="hal__ble_8c_source.html#l00354">halBleTaskJoystick()</a>, and <a class="el" href="task__joystick_8c_source.html#l00053">task_joystick()</a>.</p>

</div>
</div>
<a id="ae57a2da1ef72f6611b9d71fce0356352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae57a2da1ef72f6611b9d71fce0356352">&#9670;&nbsp;</a></span>joystick_movement_usb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t joystick_movement_usb</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>queue which receives joystick commands, triggered via USB </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00063">63</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__adc_8c_source.html#l00753">halAdcInit()</a>, <a class="el" href="hal__serial_8c_source.html#l00423">halSerialTaskJoystick()</a>, and <a class="el" href="task__joystick_8c_source.html#l00053">task_joystick()</a>.</p>

</div>
</div>
<a id="af6712dd167c6d09e2c4f92e545c4b527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6712dd167c6d09e2c4f92e545c4b527">&#9670;&nbsp;</a></span>keyboard_ble_press</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t keyboard_ble_press</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>queue which receives ble keycodes which needs to be pressed </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00059">59</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__ble_8c_source.html#l00181">halBleTaskKeyboardPress()</a>, and <a class="el" href="task__kbd_8c_source.html#l00164">task_keyboard()</a>.</p>

</div>
</div>
<a id="a6abced931709a05f1af06406aed36620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6abced931709a05f1af06406aed36620">&#9670;&nbsp;</a></span>keyboard_ble_release</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t keyboard_ble_release</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>queue which receives ble keycodes which needs to be released </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00060">60</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__ble_8c_source.html#l00253">halBleTaskKeyboardRelease()</a>, and <a class="el" href="task__kbd_8c_source.html#l00164">task_keyboard()</a>.</p>

</div>
</div>
<a id="a335382800db2f025b654e38bc4493334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a335382800db2f025b654e38bc4493334">&#9670;&nbsp;</a></span>keyboard_usb_press</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t keyboard_usb_press</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>NOTE: keyboard queues receive uint16 data type, which is either directly used as keycode by either HID or serial task (if high byte is != 0) OR parsed by keyboard helper functions. In this case multibyte text (unicode) should use only low byte for each byte of the input textqueue which receives USB keycodes which needs to be pressed </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00057">57</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__serial_8c_source.html#l00255">halSerialTaskKeyboardPress()</a>, and <a class="el" href="task__kbd_8c_source.html#l00164">task_keyboard()</a>.</p>

</div>
</div>
<a id="afa2a4758b5658496b3acd30defca0344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa2a4758b5658496b3acd30defca0344">&#9670;&nbsp;</a></span>keyboard_usb_release</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t keyboard_usb_release</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>queue which receives USB keycodes which needs to be released </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00058">58</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__serial_8c_source.html#l00305">halSerialTaskKeyboardRelease()</a>, and <a class="el" href="task__kbd_8c_source.html#l00164">task_keyboard()</a>.</p>

</div>
</div>
<a id="aa3c7f09dbac02c97076a58d943afd747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c7f09dbac02c97076a58d943afd747">&#9670;&nbsp;</a></span>mouse_movement_ble</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t mouse_movement_ble</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>queue which receives mouse commands, triggered via BLE </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00062">62</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__adc_8c_source.html#l00753">halAdcInit()</a>, <a class="el" href="hal__adc_8c_source.html#l00287">halAdcTaskMouse()</a>, <a class="el" href="hal__ble_8c_source.html#l00305">halBleTaskMouse()</a>, and <a class="el" href="task__mouse_8c_source.html#l00079">task_mouse()</a>.</p>

</div>
</div>
<a id="a7aa6eb22a0fd9a55a9308d0afd5154bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aa6eb22a0fd9a55a9308d0afd5154bd">&#9670;&nbsp;</a></span>mouse_movement_usb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t mouse_movement_usb</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>queue which receives mouse commands, triggered via USB </p>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00061">61</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__commands_8c_source.html#l00125">checkqueues()</a>, <a class="el" href="hal__adc_8c_source.html#l00753">halAdcInit()</a>, <a class="el" href="hal__adc_8c_source.html#l00287">halAdcTaskMouse()</a>, <a class="el" href="hal__serial_8c_source.html#l00354">halSerialTaskMouse()</a>, and <a class="el" href="task__mouse_8c_source.html#l00079">task_mouse()</a>.</p>

</div>
</div>
<a id="a591ffaa399081915a0eab951f83f93e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a591ffaa399081915a0eab951f83f93e2">&#9670;&nbsp;</a></span>virtualButtonsIn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EventGroupHandle_t virtualButtonsIn[<a class="el" href="common_8h.html#aee89b7237c851b73f694c2fb1530cbeb">NUMBER_VIRTUALBUTTONS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event group array for all virtual buttons, used by functional tasks to send a signal to the debouncer task. </p>
<p>Equal to virtualButtonsOut, only these flags should be used to invoke the debouncer. If one of these flags will be set, this flag will be set in virtualButtonsOut as well (by the debouncer). If this flag is cleared within the debouncing time, the flag will not be mapped to virtualButtonsOut.</p>
<p>VB setting tasks should use this eventgroup if the debouncer should be invoked. If no debouncing is necessary, write directly to virtualButtonsOut</p>
<dl class="section warning"><dt>Warning</dt><dd>VB pending tasks should always pend for virtualButtonsOut. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a3633668cff0a27ea52ca662673978667" title="Event group array for all virtual buttons, used by functional tasks to be triggered. ">virtualButtonsOut</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00055">55</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__debouncer_8c_source.html#l00181">debouncerCallback()</a>, <a class="el" href="hal__io_8c_source.html#l00065">gpio_isr_handler()</a>, <a class="el" href="hal__adc_8c_source.html#l00753">halAdcInit()</a>, <a class="el" href="hal__adc_8c_source.html#l00575">halAdcTaskThreshold()</a>, and <a class="el" href="task__debouncer_8c_source.html#l00306">task_debouncer()</a>.</p>

</div>
</div>
<a id="a3633668cff0a27ea52ca662673978667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3633668cff0a27ea52ca662673978667">&#9670;&nbsp;</a></span>virtualButtonsOut</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EventGroupHandle_t virtualButtonsOut[<a class="el" href="common_8h.html#aee89b7237c851b73f694c2fb1530cbeb">NUMBER_VIRTUALBUTTONS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event group array for all virtual buttons, used by functional tasks to be triggered. </p>
<p>Each EventGroupHandle contains 4 virtual buttons (VB), press and release actions are included: (1&lt;&lt;0) press action of VB 0 (or 4, 8, 12, 16, 20, 24, 28, depending on array index) (1&lt;&lt;1) press action of VB 1 (or 5, 9, 13, 17, 21, 25, 29, depending on array index) (1&lt;&lt;2) press action of VB 2 (or 6, 10, 14, 18, 22, 26, 30, depending on array index) (1&lt;&lt;3) press action of VB 3 (or 7, 11, 15, 19, 23, 27, 31, depending on array index) The same for release actions: (1&lt;&lt;4) release for VB 0 (+ the others) (1&lt;&lt;5) release for VB 1 (+ the others) (1&lt;&lt;6) release for VB 2 (+ the others) (1&lt;&lt;7) release for VB 3 (+ the others)</p>
<p>Each functional task should pend on these flags, which will be set by the hal task or the analog task. Please reset the flag after pending. Unused flags can be left set, on a task change for a virtual button, these flags are reset.</p>
<dl class="section warning"><dt>Warning</dt><dd>If you want to debounce an action, set the corresponding flag in virtualButtonsIn </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a591ffaa399081915a0eab951f83f93e2" title="Event group array for all virtual buttons, used by functional tasks to send a signal to the debouncer...">virtualButtonsIn</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00054">54</a> of file <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html">flipmouse_fabi_esp32_kbdmouse_main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00073">app_main()</a>, <a class="el" href="task__debouncer_8c_source.html#l00181">debouncerCallback()</a>, <a class="el" href="hal__adc_8c_source.html#l00753">halAdcInit()</a>, <a class="el" href="hal__adc_8c_source.html#l00506">task_calibration()</a>, <a class="el" href="config__switcher_8c_source.html#l00447">task_configswitcher()</a>, <a class="el" href="task__debouncer_8c_source.html#l00306">task_debouncer()</a>, <a class="el" href="task__infrared_8c_source.html#l00051">task_infrared()</a>, <a class="el" href="task__joystick_8c_source.html#l00053">task_joystick()</a>, <a class="el" href="task__kbd_8c_source.html#l00164">task_keyboard()</a>, <a class="el" href="task__macros_8c_source.html#l00050">task_macro()</a>, and <a class="el" href="task__mouse_8c_source.html#l00079">task_mouse()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
